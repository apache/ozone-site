---
title: Release 2.1.0 available
date: 2025-12-31
linked: true
---
<!---
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. See accompanying LICENSE file.
-->

![Joshua-Trees-haiku](releases/2.1.0.jpg)

# Release Note

Apache Ozone 2.1.0 adds 805 new features, improvements and bug fixes on top of Ozone 2.0.

## Notable Changes

---

* [HDDS-10239](https://issues.apache.org/jira/browse/HDDS-10239) | **Storage Container Reconciliation**

Introduced a container reconciliation protocol to resolve mismatched container states and verify replica integrity.

---

* [HDDS-12940](https://issues.apache.org/jira/browse/HDDS-12940) | **Ozone Snapshot Phase 3: Scale up Snapshot Operations**

Enhanced Ozone Snapshot scalability and continued stability improvements.

---

* [HDDS-8387](https://issues.apache.org/jira/browse/HDDS-8387) | **Container and volume scanners phase II**

Enhanced storage volume failure handling by introducing a 'degraded' state to preserve data availability, along with improved health observability.

---

* [HDDS-12564](https://issues.apache.org/jira/browse/HDDS-12564) | **Handling disk issues in Datanodes - Phase II**

Enhanced Datanode disk space management to prevent out-of-space failures.

---

* [HDDS-13323](https://issues.apache.org/jira/browse/HDDS-13323) | **STS - temporary, limited-privilege credentials service**
Implemented AWS STS AssumeRole support to generate short-lived temporary credentials.

---

## New Configuration Options

- OZONE_SERVER_OPTS: A new environment variable was added to allow setting common Java options for all Ozone server processes at once.
- ozone.compaction.service.enabled: Enable or disable a background job that periodically compacts rocksdb tables flagged for compaction. The default is false.
- ozone.om.compaction.service.run.interval: A background job that periodically compacts rocksdb tables flagged for compaction. The default is 6 hours.
- ozone.om.compaction.service.timeout: A timeout value of compaction service. If this is set greater than 0, the service will stop waiting for compaction completion after this time. Unit could be defined with postfix (ns,ms,s,m,h,d). The default is 10 min.
- ozone.om.compaction.service.columnfamilies: A comma separated, no spaces list of all the column families that are compacted by the compaction service. If this is empty, no column families are compacted. The default is "keyTable,fileTable,directoryTable,deletedTable,deletedDirectoryTable,multipartInfoTable".
- ozone.om.snapshot.prune.compaction.backup.batch.size: This property controls Prune SST files in Compaction backup directory in batches every `ozone.om.snapshot.compaction.dag.prune.daemon.run.interval`. The default is 2000.

These properties provide more control over the Ratis write buffer, which can be adjusted to optimize performance based on workload and
hardware.
- ozone.om.ratis.server.pending.write.byte-limit: Sets the maximum byte size of all pending write requests. The default is 64MB.
- ozone.om.ratis.server.pending.write.element-limit: Sets the maximum number of pending write requests. The default is 4096.

## Incompatible change

* [HDDS-12152](https://issues.apache.org/jira/browse/HDDS-12152) | Ozone now requires the Hadoop 3.4 runtime. Support for Hadoop 3.1.2 is deprecated.

### Default Value Changes

- hdds.scm.block.deletion.per-interval.max: Default is now 500,000 blocks per interval.
- hdds.datanode.volume.choosing.policy: Default changed from RoundRobinVolumeChoosingPolicy to CapacityVolumeChoosingPolicy. 
- hdds.datanode.volume.min.free.space.percent: Default changed to 0.1%.
- hdds.datanode.block.deleting.limit.per.interval: Default is now 20,000 blocks per interval.
- hdds.scm.safemode.min.datanode: Default changed from 1 to 3. 
- hdds.secret.key.expiry.duration: Default is now 9 days. This change ensures that tokens remain valid for their full configured duration, preventing premature key invalidation and improving stable authentication.
- fs.trash.classname: Class name updated to org.apache.hadoop.fs.ozone.OzoneTrashPolicy. 
- ozone.key.deleting.limit.per.task: Default is now 50,000 keys per task.
- ozone.s3g.https-address: Default changed from None to 0.0.0.0:9879.
- ozone.om.fs.snapshot.max.limit: Default is now 10,000 snapshots.
- ozone.om.ratis.segment.size: Default is now 64MB (was 4MB).  
- ozone.scm.ha.dbtransactionbuffer.flush.interval: Default is now 1 min.
- ozone.scm.ha.ratis.segment.size: Default is now 64MB (was 4MB).

### Removed Configurations:

- hdds.datanode.volume.min.free.space: This configuration is removed since [HDDS-12928](https://issues.apache.org/jira/browse/HDDS-12928).
- hdds.rest.http-address: This configuration is removed since [HDDS-12761](https://issues.apache.org/jira/browse/HDDS-12761).
- hdds.scm.safemode.pipeline-availability.check: This configuration is removed since [HDDS-11799](https://issues.apache.org/jira/browse/HDDS-11799).

# Changelog

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),  
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.1.0] - 2025-12-31

### Added

- Merged the HSync feature branch to support low-latency writes, including lease recovery and client-side metrics. (HDDS-11342) (HDDS-11407) (HDDS-10733)
- Switched to Recon v2 UI as the default user interface. (HDDS-11609)
- Introduced ozone repair CLI commands for quota repair, certificate operations, and snapshot info updates. (HDDS-12039) (HDDS-12041) (HDDS-10295)
- Added design documentation and initial integration steps for OpenTelemetry. (HDDS-13679)
- Implemented an in-memory manager for Snapshot Local Data. (HDDS-13627)
- Added support for Ranger to authorize STS tokens. (HDDS-13848)
- Added latency metrics for key creation operations and deletion services to Grafana dashboards. (HDDS-13510) (HDDS-12442)
- Include openssl native library check in the ozone debug checknative command output. (HDDS-13266) (HDDS-12056)
- Apache Ozone is migrated from OpenTracing to OpenTelemetry for distributed tracing. (HDDS-13680)
- Enable rpm builds for Ozone. To build rpm packages, do: mvn clean package -DskipTests=true -Prpm. Optionally specify -Drpm.targetArch=aarch64 for ARM builds. (HDDS-13439)
- Ozone supports creating deb package for Debian. Example command: mvn clean package -Pdeb The package file ozone_<ozone_version>-<linux_distro>_<arch>.deb will be created under folder path hadoop-ozone/dist/target. The Ozone binary will be installed under /opt/ozone directory. (HDDS-13414)
- Added a "Deletion Progress" section to the OM Web UI to track Key Deleting Service metrics (count and size) from the last 24 hours, along with service status and schedule details. (HDDS-12887)
- Added a throttling mechanism to SCM to prevent excessive memory usage and long GC pauses during large-scale block deletions. (HDDS-12087)
- Added support for Listener Ozone Managers (OM). Listener OMs are read-only, non-voting nodes that replicate logs from the leader to serve read requests, improving read performance and offloading voting OMs.(HDDS-11523)
- Exposed new metrics under `StorageVolumeScannerMetrics` and `VolumeInfoMetrics` on DataNodes to improve observability of storage volume scanning activity and health. (HDDS-8783)

### Changed

- Metadata Storage: Moved container-related metadata and OM task metadata from Derby DB to Ozone Manager (OM) RocksDB. (HDDS-13669)
- Locking: Refactored OzoneManagerLock to handle hierarchical resource locking and implemented a pool-based lock manager. (HDDS-13797) (HDDS-13798)
- Bootstrapping: Updated the OM bootstrapping process to use InodeID to identify SST files inside tarballs. (HDDS-12984)
- Bumped Apache Ratis to version 3.1.1. (HDDS-11504)
- Bumped AWS SDK to version 2.35.5. (HDDS-13793)
- Bumped Jetty to 9.4.58. (HDDS-13585)
- Bumped minimum Maven version to 3.6.3. (HDDS-13364)
- Recon Sync: Separated Recon OM synchronization from task processing to improve stability. (HDDS-8633)
- Container Balancer: Updated ContainerBalancer to avoid sending delete commands with expiration times in the past. (HDDS-13067)
- The default backup SST pruning interval is now **10 minutes**. This means old backup files will be deleted more frequently, improving disk space usage if Ozone Snapshot is enabled. (HDDS-13638)
- Ozone now requires the Hadoop 3.4 runtime. Support for Hadoop 3.1.2 is deprecated. (HDDS-12152)
- Renamed the previous functionality of the `--all` option in `ozone sh snapshot lsDiff` to `--all-status`. The `--all` option now behaves as a listing limit, setting the count to `Integer.MAX_VALUE`. (HDDS-8802)


### Fixed

- Snapshot Locking: Fixed OMLockDetails usage where it incorrectly returned a ThreadLocal Object. (HDDS-13978) (HDDS-13004)
- Recon Startup: Improved Recon bootup times by handling failed delta tasks from previous runs and making task reprocessing non-blocking. (HDDS-13791)
- S3 Gateway: Fixed an internal error in CompleteMultipartUpload when parts are not specified. (HDDS-11457)
- Container Balancer: Fixed multithreading bugs in ContainerBalancerTask. (HDDS-11386)
- Recursion bugs: Fixed ozone fs CLI giving incorrect prompts for recursive volume deletion. (HDDS-11346)
- Data Integrity: Fixed issues where ozone debug chunkinfo output was missing block location data for EC containers. (HDDS-11069)
- Lease Recovery: Fixed NullPointerException in LeaseRecovery during finalization block failure. (HDDS-10626) (HDDS-10632)
- Overhauled the Snapshot Garbage Collection system to resolve performance issues and ensure storage is reclaimed in a timely manner. No configuration changes or special upgrade procedures are required. (HDDS-12558)

### Security

- Tokens: Implemented Symmetric Keys for Delegation Tokens. (HDDS-8829)
- Ranger: Added artifacts for Ranger to authorize STS tokens. (HDDS-13848)
- HTTP: Fixed HttpServer2 to infer MIME types correctly to prevent potential security misconfigurations. (HDDS-11180)