

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="Apache Ozone Documentation">

    <title>Documentation for Apache Ozone</title>

    
    <link href="../../css/bootstrap.min.css" rel="stylesheet">

    
    <link href="../../css/ozonedoc.css" rel="stylesheet">

    
    
    <link href="../../swagger-resources/swagger-ui.css" rel="stylesheet">

    
    <script>
      var _paq = window._paq = window._paq || [];
      

       
      _paq.push(['disableCookies']);
      

      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="//analytics.apache.org/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '34']);
        var d=document, g=d.createElement('script'),
s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    

  </head>


<body>

  
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sidebar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="../../zh/index.html" class="navbar-left ozone-logo">
        <img src="../../ozone-logo-small.png"/>
      </a>
      <a class="navbar-brand hidden-xs" href="../../zh/index.html">
        Apache Ozone/HDDS Documentation
      </a>
      <a class="navbar-brand visible-xs-inline" href="#">Apache Ozone</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/apache/ozone">Source</a></li>
        <li><a href="https://ozone.apache.org">Apache Ozone</a></li>
        <li><a href="https://apache.org">ASF</a></li>
      </ul>
    </div>
  </div>
</nav>


  <div class="wrapper">
  <div class="container-fluid">
    <div class="row">
      
<div class="col-sm-2 col-md-2 sidebar" id="sidebar">
  <ul class="nav nav-sidebar">
    
    
        
            <li class="">
                
                   <a href="../../zh/index.html">
                

                    
                    <span>概述</span>
                </a>
            </li>
        
    
        
            <li class="">
                
                   <a href="../../zh/start.html">
                

                    
                    <span>快速入门</span>
                </a>
            </li>
        
    
        
            <li class="">
                <a href="../../zh/concept.html">
                    
                    <span>概念</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/concept/overview.html">概览</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/concept/ozonemanager.html">Ozone Manager</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/concept/storagecontainermanager.html">Storage Container Manager</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/concept/datanodes.html">数据节点</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/concept/containers.html">Containers</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/concept/recon.html">Recon</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../../zh/feature.html">
                    
                    <span>特性</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/feature/decommission.html">Decommissioning</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/erasurecoding.html">纠删码</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/om-ha.html">高可用 OM</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/scm-ha.html">高可用 SCM</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/dn-merge-rocksdb.html">在DataNode上合并Container的RocksDB</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/prefixfso.html">基于前缀的文件系统优化</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/topology.html">拓扑感知能力</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/quota.html">Ozone 中的配额</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/recon.html">Recon 服务器</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/reconfigurability.html">动态加载配置</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../../zh/security.html">
                    
                    <span>安全</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/security/secureozone.html">安全化 Ozone</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securingtde.html">透明数据加密</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/gdpr.html">Ozone 中的 GDPR</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securingdatanodes.html">安全化 Datanode</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securingozonehttp.html">安全化 HTTP</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securings3.html">安全化 S3</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securityacls.html">Ozone 访问控制列表</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securitywithranger.html">Apache Ranger</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../../zh/interface.html">
                    
                    <span>客户端接口</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/interface/cli.html">命令行接口</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                
                   <a href="../../zh/tools.html">
                

                    
                    <span>工具</span>
                </a>
            </li>
        
    
        
            <li class="">
                
                   <a href="../../zh/recipe.html">
                

                    
                    <span>使用配方</span>
                </a>
            </li>
        
    
        
            <li class="">
                <a href="../../">
                    
                    <span></span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/interface/javaapi.html">Java API</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/interface/ofs.html">Ofs (兼容 Hadoop 的文件系统)</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/interface/o3fs.html">Ozone 文件系统</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/interface/csi.html">CSI 协议</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/interface/s3.html">S3 协议接口</a>
                           
                        </li>
                    
                        <li class="active">
                           
                           <a href="../../zh/interface/reconapi.html">Recon API</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
    <li><a href="../../design.html"><span><b>Design docs</b></span></a></li>
    <li class="visible-xs"><a href="#">References</a>
    <ul class="nav">
        <li><a href="https://github.com/apache/ozone"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> Source</a></li>
        <li><a href="https://ozone.apache.org"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> Apache Ozone</a></li>
        <li><a href="https://apache.org"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> ASF</a></li>
    </ul></li>
  </ul>

</div>

      <div class="col-sm-10 col-sm-offset-2 col-md-10 col-md-offset-2 main-content">



        <div class="col-md-9">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="../../zh/index.html">Home</a></li>
                  <li class="breadcrumb-item" aria-current="page"><a href="../../zh/interface.html">客户端接口</a></li>
                  <li class="breadcrumb-item active" aria-current="page">Recon API</li>
                </ol>
              </nav>

          

<div class="pull-right">
    
    
    
    <a href="../../interface/reconapi.html"><span class="label label-success">English</span></a>
    
    
    
    
</div>


          <div class="col-md-9">
            <h1>Recon API</h1>

            <!---
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<p>Recon API v1 是一组 HTTP 端点，可以帮助您了解 Ozone 集群的当前状态，并在需要时进行故障排除。</p>
<h2 id="容器">容器</h2>
<h3 id="get-apiv1containers">GET /api/v1/containers</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>prevKey (可选)</p>
<p>只回传ID大于给定的 prevKey 的容器。
示例：prevKey=1</p>
</li>
<li>
<p>limit (可选)</p>
<p>只回传有限数量的结果。默认限制是1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>回传所有 ContainerMetadata 对象。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;data&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;totalCount&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;containers&#34;</span>: [
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;ContainerID&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;NumberOfKeys&#34;</span>: <span style="color:#ae81ff">834</span>
</span></span><span style="display:flex;"><span>          },
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;ContainerID&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;NumberOfKeys&#34;</span>: <span style="color:#ae81ff">833</span>
</span></span><span style="display:flex;"><span>          },
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;ContainerID&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;NumberOfKeys&#34;</span>: <span style="color:#ae81ff">833</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="get-apiv1containersidkeys">GET /api/v1/containers/:id/keys</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>prevKey (可选)</p>
<p>只回传在给定的 prevKey 键前缀之后的键。
示例：prevKey=/vol1/bucket1/key1</p>
</li>
<li>
<p>limit (可选)</p>
<p>只回传有限数量的结果。默认限制是1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>回传给定容器 ID 的所有 KeyMetadata 对象。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;totalCount&#34;</span>:<span style="color:#ae81ff">7</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;keys&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;Volume&#34;</span>:<span style="color:#e6db74">&#34;vol-1-73141&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;Bucket&#34;</span>:<span style="color:#e6db74">&#34;bucket-3-35816&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;Key&#34;</span>:<span style="color:#e6db74">&#34;key-0-43637&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;DataSize&#34;</span>:<span style="color:#ae81ff">1000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;Versions&#34;</span>:[<span style="color:#ae81ff">0</span>],
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;Blocks&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;0&#34;</span>: [
</span></span><span style="display:flex;"><span>              {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;containerID&#34;</span>:<span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;localID&#34;</span>:<span style="color:#ae81ff">105232659753992201</span>
</span></span><span style="display:flex;"><span>              }
</span></span><span style="display:flex;"><span>            ]
</span></span><span style="display:flex;"><span>          },
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;CreationTime&#34;</span>:<span style="color:#e6db74">&#34;2020-11-18T18:09:17.722Z&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;ModificationTime&#34;</span>:<span style="color:#e6db74">&#34;2020-11-18T18:09:30.405Z&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="get-apiv1containersmissing">GET /api/v1/containers/missing</h3>
<p><strong>参数</strong></p>
<p>没有参数。</p>
<p><strong>回传</strong></p>
<p>回传所有丢失容器的 MissingContainerMetadata 对象。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    	<span style="color:#f92672">&#34;totalCount&#34;</span>: <span style="color:#ae81ff">26</span>,
</span></span><span style="display:flex;"><span>    	<span style="color:#f92672">&#34;containers&#34;</span>: [{
</span></span><span style="display:flex;"><span>    		<span style="color:#f92672">&#34;containerID&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    		<span style="color:#f92672">&#34;missingSince&#34;</span>: <span style="color:#ae81ff">1605731029145</span>,
</span></span><span style="display:flex;"><span>    		<span style="color:#f92672">&#34;keys&#34;</span>: <span style="color:#ae81ff">7</span>,
</span></span><span style="display:flex;"><span>    		<span style="color:#f92672">&#34;pipelineID&#34;</span>: <span style="color:#e6db74">&#34;88646d32-a1aa-4e1a&#34;</span>,
</span></span><span style="display:flex;"><span>    		<span style="color:#f92672">&#34;replicas&#34;</span>: [{
</span></span><span style="display:flex;"><span>    			<span style="color:#f92672">&#34;containerId&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    			<span style="color:#f92672">&#34;datanodeHost&#34;</span>: <span style="color:#e6db74">&#34;localhost-1&#34;</span>,
</span></span><span style="display:flex;"><span>    			<span style="color:#f92672">&#34;firstReportTimestamp&#34;</span>: <span style="color:#ae81ff">1605724047057</span>,
</span></span><span style="display:flex;"><span>    			<span style="color:#f92672">&#34;lastReportTimestamp&#34;</span>: <span style="color:#ae81ff">1605731201301</span>
</span></span><span style="display:flex;"><span>    		}, 
</span></span><span style="display:flex;"><span>            <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>            ]
</span></span><span style="display:flex;"><span>    	},
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="get-apiv1containersidreplicahistory">GET /api/v1/containers/:id/replicaHistory</h3>
<p><strong>参数</strong></p>
<p>没有参数。</p>
<p><strong>回传</strong>
回传给定容器 ID 的所有 ContainerHistory 对象。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;containerId&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;datanodeHost&#34;</span>: <span style="color:#e6db74">&#34;localhost-1&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;firstReportTimestamp&#34;</span>: <span style="color:#ae81ff">1605724047057</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;lastReportTimestamp&#34;</span>: <span style="color:#ae81ff">1605730421294</span>
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>    ]
</span></span></code></pre></div><h3 id="get-apiv1containersunhealthy">GET /api/v1/containers/unhealthy</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>batchNum (可选)
回传结果的批号(如“页码”)。
传递1，将回传记录1到limit。传递2，将回传limit + 1到2 * limit，依此类推。</p>
</li>
<li>
<p>limit (可选)</p>
<p>只回传有限数量的结果。默认限制是1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>回传所有不健康容器的 UnhealthyContainerMetadata 对象。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;missingCount&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;underReplicatedCount&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;overReplicatedCount&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;misReplicatedCount&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;containers&#34;</span>: [{
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;containerID&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;containerState&#34;</span>: <span style="color:#e6db74">&#34;MISSING&#34;</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;unhealthySince&#34;</span>: <span style="color:#ae81ff">1605731029145</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;expectedReplicaCount&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;actualReplicaCount&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;replicaDeltaCount&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;reason&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;keys&#34;</span>: <span style="color:#ae81ff">7</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;pipelineID&#34;</span>: <span style="color:#e6db74">&#34;88646d32-a1aa-4e1a&#34;</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;replicas&#34;</span>: [{
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;containerId&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;datanodeHost&#34;</span>: <span style="color:#e6db74">&#34;localhost-1&#34;</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;firstReportTimestamp&#34;</span>: <span style="color:#ae81ff">1605722960125</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;lastReportTimestamp&#34;</span>: <span style="color:#ae81ff">1605731230509</span>
</span></span><span style="display:flex;"><span>     		}, 
</span></span><span style="display:flex;"><span>            <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>            ]
</span></span><span style="display:flex;"><span>     	},
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>     } 
</span></span></code></pre></div><h3 id="get-apiv1containersunhealthystate">GET /api/v1/containers/unhealthy/:state</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>batchNum (可选)</p>
<p>回传结果的批号(如“页码”)。
传递1，将回传记录1到limit。传递2，将回传limit + 1到2 * limit，依此类推。</p>
</li>
<li>
<p>limit (可选)</p>
<p>只回传有限数量的结果。默认限制是1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>回传处于给定状态的容器的 UnhealthyContainerMetadata 对象。
不健康的容器状态可能为<code>MISSING</code>, <code>MIS_REPLICATED</code>, <code>UNDER_REPLICATED</code>,<code>OVER_REPLICATED</code>。
响应结构与<code>/containers/unhealthy</code>相同。</p>
<h3 id="get-apiv1containersmismatch">GET /api/v1/containers/mismatch</h3>
<p><strong>回传</strong></p>
<p>回传 OM 和 SCM 之间不匹配容器的列表。</p>
<ul>
<li>容器存在于 OM 中，但不存在于 SCM 中。</li>
<li>容器存在于 SCM 中，但不存在于 OM 中。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;containerId&#34;</span> : <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;numberOfKeys&#34;</span> : <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;pipelines&#34;</span> : [
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;pipelineId&#34;</span> <span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;1423ghjds832403232&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;pipelineId&#34;</span> <span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;32vds94943fsdh4443&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;pipelineId&#34;</span> <span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;32vds94943fsdhs443&#34;</span>
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;existsAt&#34;</span> : <span style="color:#e6db74">&#34;OM&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><h3 id="get-apiv1containersmismatchdeleted">GET /api/v1/containers/mismatch/deleted</h3>
<p><strong>参数</strong></p>
<ul>
<li>prevKey (可选)</li>
</ul>
<p>返回在SCM中，给定prevKey(容器ID) 后被标记为已删除状态，且在OM中存在的容器集合，
以便找出映射到这些已删除状态容器的键列表。例如：prevKey=5，跳过直到准确地定位到前一个容器ID。</p>
<ul>
<li>
<p>limit (可选)</p>
<p>仅返回有限数量的结果。默认限制为1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>返回在SCM中已删除但在OM中存在的容器集合，以找出映射到这些已删除状态容器的键列表。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;containerId&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;numberOfKeys&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;pipelines&#34;</span>: []
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><h3 id="get-apiv1keysopen">GET /api/v1/keys/open</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>prevKey (可选)</p>
<p>返回给定 prevKey id 之后仍然处于打开状态且存在的键/文件集合。
例如：prevKey=/vol1/bucket1/key1，这将跳过键，直到成功定位到给定的 prevKey。</p>
</li>
<li>
<p>limit (可选)</p>
<p>仅返回有限数量的结果。默认限制为1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>返回处于打开状态的键/文件集合。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;lastKey&#34;</span>: <span style="color:#e6db74">&#34;/vol1/fso-bucket/dir1/dir2/file2&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;replicatedTotal&#34;</span>: <span style="color:#ae81ff">13824</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;unreplicatedTotal&#34;</span>: <span style="color:#ae81ff">4608</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;entities&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/vol1/bucket1/key1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;keyState&#34;</span>: <span style="color:#e6db74">&#34;Open&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;inStateSince&#34;</span>: <span style="color:#ae81ff">1667564193026</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;size&#34;</span>: <span style="color:#ae81ff">1024</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicatedSize&#34;</span>: <span style="color:#ae81ff">3072</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;unreplicatedSize&#34;</span>: <span style="color:#ae81ff">1024</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicationType&#34;</span>: <span style="color:#e6db74">&#34;RATIS&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicationFactor&#34;</span>: <span style="color:#e6db74">&#34;THREE&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/vol1/bucket1/key2&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;keyState&#34;</span>: <span style="color:#e6db74">&#34;Open&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;inStateSince&#34;</span>: <span style="color:#ae81ff">1667564193026</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;size&#34;</span>: <span style="color:#ae81ff">512</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicatedSize&#34;</span>: <span style="color:#ae81ff">1536</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;unreplicatedSize&#34;</span>: <span style="color:#ae81ff">512</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicationType&#34;</span>: <span style="color:#e6db74">&#34;RATIS&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicationFactor&#34;</span>: <span style="color:#e6db74">&#34;THREE&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/vol1/fso-bucket/dir1/file1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;keyState&#34;</span>: <span style="color:#e6db74">&#34;Open&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;inStateSince&#34;</span>: <span style="color:#ae81ff">1667564193026</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;size&#34;</span>: <span style="color:#ae81ff">1024</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicatedSize&#34;</span>: <span style="color:#ae81ff">3072</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;unreplicatedSize&#34;</span>: <span style="color:#ae81ff">1024</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicationType&#34;</span>: <span style="color:#e6db74">&#34;RATIS&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicationFactor&#34;</span>: <span style="color:#e6db74">&#34;THREE&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/vol1/fso-bucket/dir1/dir2/file2&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;keyState&#34;</span>: <span style="color:#e6db74">&#34;Open&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;inStateSince&#34;</span>: <span style="color:#ae81ff">1667564193026</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;size&#34;</span>: <span style="color:#ae81ff">2048</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicatedSize&#34;</span>: <span style="color:#ae81ff">6144</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;unreplicatedSize&#34;</span>: <span style="color:#ae81ff">2048</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicationType&#34;</span>: <span style="color:#e6db74">&#34;RATIS&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;replicationFactor&#34;</span>: <span style="color:#e6db74">&#34;THREE&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="get-apiv1keysdeletepending">GET /api/v1/keys/deletePending</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>prevKey (可选)</p>
<p>返回给定 prevKey id 之后处于待删除状态的键/文件集合。
例如：prevKey=/vol1/bucket1/key1，这将跳过键，直到成功定位到给定的 prevKey。</p>
</li>
<li>
<p>limit (可选)</p>
<p>仅返回有限数量的结果。默认限制为1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>返回处于待删除状态的键/文件集合。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;lastKey&#34;</span>: <span style="color:#e6db74">&#34;sampleVol/bucketOne/key_one&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;replicatedTotal&#34;</span>: <span style="color:#ae81ff">-1530804718628866300</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;unreplicatedTotal&#34;</span>: <span style="color:#ae81ff">-1530804718628866300</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;deletedkeyinfo&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;omKeyInfoList&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;metadata&#34;</span>: {},
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;objectID&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;updateID&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;parentObjectID&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;volumeName&#34;</span>: <span style="color:#e6db74">&#34;sampleVol&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;bucketName&#34;</span>: <span style="color:#e6db74">&#34;bucketOne&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;keyName&#34;</span>: <span style="color:#e6db74">&#34;key_one&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;dataSize&#34;</span>: <span style="color:#ae81ff">-1530804718628866300</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;keyLocationVersions&#34;</span>: [],
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;creationTime&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;modificationTime&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;replicationConfig&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;replicationFactor&#34;</span>: <span style="color:#e6db74">&#34;ONE&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;requiredNodes&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;replicationType&#34;</span>: <span style="color:#e6db74">&#34;STANDALONE&#34;</span>
</span></span><span style="display:flex;"><span>          },
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;fileChecksum&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;fileName&#34;</span>: <span style="color:#e6db74">&#34;key_one&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;acls&#34;</span>: [],
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;0/key_one&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;file&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;latestVersionLocations&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;replicatedSize&#34;</span>: <span style="color:#ae81ff">-1530804718628866300</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;fileEncryptionInfo&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;objectInfo&#34;</span>: <span style="color:#e6db74">&#34;OMKeyInfo{volume=&#39;sampleVol&#39;, bucket=&#39;bucketOne&#39;, key=&#39;key_one&#39;, dataSize=&#39;-1530804718628866186&#39;, creationTime=&#39;0&#39;, objectID=&#39;0&#39;, parentID=&#39;0&#39;, replication=&#39;STANDALONE/ONE&#39;, fileChecksum=&#39;null}&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;updateIDset&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;OK&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="get-apiv1keysdeletependingdirs">GET /api/v1/keys/deletePending/dirs</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>prevKey (可选)</p>
<p>返回给定 prevKey id 之后处于待删除状态的目录集合。
例如：prevKey=/vol1/bucket1/bucket1/dir1，这将跳过目录，直到成功定位到给定的 prevKey。</p>
</li>
<li>
<p>limit (可选)</p>
<p>仅返回有限数量的结果。默认限制为1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>返回处于待删除状态的目录集合。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;lastKey&#34;</span>: <span style="color:#e6db74">&#34;vol1/bucket1/bucket1/dir1&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;replicatedTotal&#34;</span>: <span style="color:#ae81ff">-1530804718628866300</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;unreplicatedTotal&#34;</span>: <span style="color:#ae81ff">-1530804718628866300</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;deletedkeyinfo&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;omKeyInfoList&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;metadata&#34;</span>: {},
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;objectID&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;updateID&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;parentObjectID&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;volumeName&#34;</span>: <span style="color:#e6db74">&#34;sampleVol&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;bucketName&#34;</span>: <span style="color:#e6db74">&#34;bucketOne&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;keyName&#34;</span>: <span style="color:#e6db74">&#34;key_one&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;dataSize&#34;</span>: <span style="color:#ae81ff">-1530804718628866300</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;keyLocationVersions&#34;</span>: [],
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;creationTime&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;modificationTime&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;replicationConfig&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;replicationFactor&#34;</span>: <span style="color:#e6db74">&#34;ONE&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;requiredNodes&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;replicationType&#34;</span>: <span style="color:#e6db74">&#34;STANDALONE&#34;</span>
</span></span><span style="display:flex;"><span>          },
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;fileChecksum&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;fileName&#34;</span>: <span style="color:#e6db74">&#34;key_one&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;acls&#34;</span>: [],
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;0/key_one&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;file&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;latestVersionLocations&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;replicatedSize&#34;</span>: <span style="color:#ae81ff">-1530804718628866300</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;fileEncryptionInfo&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;objectInfo&#34;</span>: <span style="color:#e6db74">&#34;OMKeyInfo{volume=&#39;sampleVol&#39;, bucket=&#39;bucketOne&#39;, key=&#39;key_one&#39;, dataSize=&#39;-1530804718628866186&#39;, creationTime=&#39;0&#39;, objectID=&#39;0&#39;, parentID=&#39;0&#39;, replication=&#39;STANDALONE/ONE&#39;, fileChecksum=&#39;null}&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;updateIDset&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;OK&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="blocks-metadata-admin-only">Blocks Metadata (admin only)</h2>
<h3 id="get-apiv1blocksdeletepending">GET /api/v1/blocks/deletePending</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>prevKey (可选)</p>
<p>仅返回给定块ID（prevKey）之后处于待删除状态的块列表。
例如：prevKey=4，这将跳过 deletedBlocks 表中的键以跳过 prevKey 之前的记录。</p>
</li>
<li>
<p>limit (可选)</p>
<p>仅返回有限数量的结果。默认限制为1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>返回待删除的块列表。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;OPEN&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;containerId&#34;</span>: <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;localIDList&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;localIDCount&#34;</span>: <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;txID&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="namespace-metadata-仅-admin">Namespace Metadata (仅 admin)</h2>
<h3 id="get-apiv1namespacesummary">GET /api/v1/namespace/summary</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>path</p>
<p>字符串形式的路径请求，不包含任何协议前缀。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>返回路径的基本信息汇总，包括实体类型和路径下对象的聚合计数。</p>
<p>如果路径存在，则 <code>status</code> 为 <code>OK</code>，否则为 <code>PATH_NOT_FOUND</code>。</p>
<p>示例: /api/v1/namespace/summary?path=/</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#960050;background-color:#1e0010">OK</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#960050;background-color:#1e0010">ROOT</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numVolume&#34;</span>: <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numBucket&#34;</span>: <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numDir&#34;</span>: <span style="color:#ae81ff">1000</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numKey&#34;</span>: <span style="color:#ae81ff">10000</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>示例: /api/v1/namespace/summary?path=/volume1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#960050;background-color:#1e0010">OK</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#960050;background-color:#1e0010">VOLUME</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numVolume&#34;</span>: <span style="color:#ae81ff">-1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numBucket&#34;</span>: <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numDir&#34;</span>: <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numKey&#34;</span>: <span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>示例: /api/v1/namespace/summary?path=/volume1/bucket1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#960050;background-color:#1e0010">OK</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#960050;background-color:#1e0010">BUCKET</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numVolume&#34;</span>: <span style="color:#ae81ff">-1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numBucket&#34;</span>: <span style="color:#ae81ff">-1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numDir&#34;</span>: <span style="color:#ae81ff">50</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numKey&#34;</span>: <span style="color:#ae81ff">500</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>示例: /api/v1/namespace/summary?path=/volume1/bucket1/dir</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#960050;background-color:#1e0010">OK</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#960050;background-color:#1e0010">DIRECTORY</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numVolume&#34;</span>: <span style="color:#ae81ff">-1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numBucket&#34;</span>: <span style="color:#ae81ff">-1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numDir&#34;</span>: <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numKey&#34;</span>: <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>示例: /api/v1/namespace/summary?path=/volume1/bucket1/dir/nestedDir</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#960050;background-color:#1e0010">OK</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#960050;background-color:#1e0010">DIRECTORY</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numVolume&#34;</span>: <span style="color:#ae81ff">-1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numBucket&#34;</span>: <span style="color:#ae81ff">-1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numDir&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;numKey&#34;</span>: <span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>如果任何 <code>num</code> 字段为 <code>-1</code>，则该路径请求不适用于该实体类型。</p>
<h3 id="get-apiv1namespacedu">GET /api/v1/namespace/du</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>path</p>
<p>字符串形式的路径请求，不包含任何协议前缀。</p>
</li>
<li>
<p>files (可选)</p>
<p>一个布尔值，默认值为 <code>false</code>。如果设置为 <code>true</code>，则会计算路径下键的磁盘使用情况。</p>
</li>
<li>
<p>replica (可选)</p>
<p>一个布尔值，默认为 <code>false</code>。如果设置为 <code>true</code>，则会计算键的副本大小的磁盘使用情况。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>返回路径下所有子路径的磁盘使用情况。规范化 <code>path</code> 字段，返回路径下直接健的总大小作为
<code>sizeDirectKey</code>，并以字节为单位返回 <code>size/sizeWithReplica</code>。</p>
<p>如果路径存在，则 <code>status</code> 为 <code>OK</code>，否则为 <code>PATH_NOT_FOUND</code>。</p>
<p>示例: /api/v1/namespace/du?path=/vol1/bucket1&amp;files=true&amp;replica=true</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#960050;background-color:#1e0010">OK</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/vol1/bucket1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;size&#34;</span>: <span style="color:#ae81ff">100000</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;sizeWithReplica&#34;</span>: <span style="color:#ae81ff">300000</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;subPathCount&#34;</span>: <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;subPaths&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/vol1/bucket1/dir1-1&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;size&#34;</span>: <span style="color:#ae81ff">30000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;sizeWithReplica&#34;</span>: <span style="color:#ae81ff">90000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;isKey&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/vol1/bucket1/dir1-2&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;size&#34;</span>: <span style="color:#ae81ff">30000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;sizeWithReplica&#34;</span>: <span style="color:#ae81ff">90000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;isKey&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/vol1/bucket1/dir1-3&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;size&#34;</span>: <span style="color:#ae81ff">30000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;sizeWithReplica&#34;</span>: <span style="color:#ae81ff">90000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;isKey&#34;</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;path&#34;</span>: <span style="color:#e6db74">&#34;/vol1/bucket1/key1-1&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;size&#34;</span>: <span style="color:#ae81ff">10000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;sizeWithReplica&#34;</span>: <span style="color:#ae81ff">30000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;isKey&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;sizeDirectKey&#34;</span>: <span style="color:#ae81ff">10000</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>如果 <code>files</code> 设置为 <code>false</code>，则子路径 <code>/vol1/bucket1/key1-1</code> 将被省略。
如果 <code>replica</code> 设置为 <code>false</code>，则 <code>sizeWithReplica</code> 返回 <code>-1</code>。
如果路径的实体类型无法具有直接键（例如根目录、卷），则 <code>sizeDirectKey</code> 返回 <code>-1</code>。</p>
<h3 id="get-apiv1namespacequota">GET /api/v1/namespace/quota</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>path</p>
<p>路径请求为字符串，不包含任何协议前缀。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>返回路径下允许的配额和已使用的配额。
只有卷和存储桶具有配额。其他类型不适用于配额请求</p>
<p>如果请求有效，则 <code>status</code> 为 <code>OK</code>；如果路径不存在，则为 <code>PATH_NOT_FOUND</code>；
如果路径存在但路径的实体类型不适用于请求，则为 <code>TYPE_NOT_APPLICABLE</code>。</p>
<p>示例: /api/v1/namespace/quota?path=/vol</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#960050;background-color:#1e0010">OK</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;allowed&#34;</span>: <span style="color:#ae81ff">200000</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;used&#34;</span>: <span style="color:#ae81ff">160000</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>如果未设置配额，则 <code>allowed</code> 返回 <code>-1</code>。详情请参阅 [Ozone 中的配额]。
(<a href="https://ci-hadoop.apache.org/view/Hadoop%20Ozone/job/ozone-doc-master/lastSuccessfulBuild/artifact/hadoop-hdds/docs/public/feature/quota.html">https://ci-hadoop.apache.org/view/Hadoop%20Ozone/job/ozone-doc-master/lastSuccessfulBuild/artifact/hadoop-hdds/docs/public/feature/quota.html</a>)</p>
<h3 id="get-apiv1namespacedist">GET /api/v1/namespace/dist</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>path</p>
<p>路径请求为字符串，不包含任何协议前缀。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>返回路径下所有键的文件大小分布。</p>
<p>如果请求有效，则 <code>status</code> 为 <code>OK</code>；如果路径不存在，则为 <code>PATH_NOT_FOUND</code>；
如果路径存在，但该路径是一个键，键不具有文件大小分布，则为 <code>TYPE_NOT_APPLICABLE</code>。</p>
<p>示例: /api/v1/namespace/dist?path=/</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#960050;background-color:#1e0010">OK</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;dist&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">30</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Recon跟踪所有大小从<code>1 KB</code>到<code>1 PB</code>的键。对于小于<code>1 KB</code>的键，映射到第一个箱（索引）；
对于大于<code>1 PB</code>的键，映射到最后一个箱（索引）。</p>
<p><code>dist</code> 的每个索引都映射到一个文件大小范围（例如 <code>1 MB</code> 到 <code>2 MB</code>）。</p>
<h2 id="集群状态">集群状态</h2>
<h3 id="get-apiv1clusterstate">GET /api/v1/clusterState</h3>
<p><strong>参数</strong></p>
<p>没有参数。</p>
<p><strong>回传</strong></p>
<p>返回 Ozone 集群当前状态的摘要。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;pipelines&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;totalDatanodes&#34;</span>: <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;healthyDatanodes&#34;</span>: <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;storageReport&#34;</span>: {
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;capacity&#34;</span>: <span style="color:#ae81ff">1081719668736</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;used&#34;</span>: <span style="color:#ae81ff">1309212672</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;remaining&#34;</span>: <span style="color:#ae81ff">597361258496</span>
</span></span><span style="display:flex;"><span>     	},
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;containers&#34;</span>: <span style="color:#ae81ff">26</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;volumes&#34;</span>: <span style="color:#ae81ff">6</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;buckets&#34;</span>: <span style="color:#ae81ff">26</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;keys&#34;</span>: <span style="color:#ae81ff">25</span>
</span></span><span style="display:flex;"><span>     }
</span></span></code></pre></div><h2 id="volumes-仅-admin">Volumes (仅 admin)</h2>
<h3 id="get-apiv1volumes">GET /api/v1/volumes</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>prevKey (可选)</p>
<p>仅返回给定 prevKey 之后的卷。
示例: prevKey=vol1</p>
</li>
<li>
<p>limit (可选)</p>
<p>仅返回有限数量的结果。默认限制为1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>返回集群中的所有卷。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;totalCount&#34;</span>: <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;volumes&#34;</span>: [{
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;volume&#34;</span>: <span style="color:#e6db74">&#34;vol1&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;owner&#34;</span>: <span style="color:#e6db74">&#34;testuser&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;admin&#34;</span>: <span style="color:#e6db74">&#34;ozone&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;creationTime&#34;</span>: <span style="color:#ae81ff">1665588176660</span> ,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;modificationTime&#34;</span>: <span style="color:#ae81ff">1665590397315</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;quotaInNamespace&#34;</span>: <span style="color:#ae81ff">2048</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;quotaInBytes&#34;</span>: <span style="color:#ae81ff">1073741824</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;usedNamespace&#34;</span>: <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;acls&#34;</span>: [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;USER&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;testuser&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;scope&#34;</span>: <span style="color:#e6db74">&#34;ACCESS&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;aclList&#34;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;WRITE&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;READ&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;DELETE&#34;</span>
</span></span><span style="display:flex;"><span>              ]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          ]
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>     }
</span></span></code></pre></div><h2 id="buckets-仅-admin">Buckets (仅 admin)</h2>
<h3 id="get-apiv1buckets">GET /api/v1/buckets</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>volume (可选)</p>
<p>卷以字符串形式表示，不包含任何协议前缀。</p>
</li>
<li>
<p>prevKey (可选)</p>
<p>返回给定 prevKey 之后的存储桶。 如果未指定卷，则忽略 prevKey。
示例: prevKey=bucket1</p>
</li>
<li>
<p>limit (可选)</p>
<p>仅返回有限数量的结果。默认限制为1000。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>如果未指定卷或指定的卷是一个空字符串，则返回集群中的所有存储桶。
如果指定了 <code>volume</code>，则仅返回 <code>volume</code> 下的存储桶。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;totalCount&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;buckets&#34;</span>: [{
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;volumeName&#34;</span>: <span style="color:#e6db74">&#34;vol1&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;bucketName&#34;</span>: <span style="color:#e6db74">&#34;buck1&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;versioning&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;storageType&#34;</span>: <span style="color:#e6db74">&#34;DISK&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;creationTime&#34;</span>: <span style="color:#ae81ff">1665588176616</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;modificationTime&#34;</span>: <span style="color:#ae81ff">1665590392293</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;usedBytes&#34;</span>: <span style="color:#ae81ff">943718400</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;usedNamespace&#34;</span>: <span style="color:#ae81ff">40000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;quotaInBytes&#34;</span>: <span style="color:#ae81ff">1073741824</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;quotaInNamespace&#34;</span>: <span style="color:#ae81ff">50000</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;owner&#34;</span>: <span style="color:#e6db74">&#34;testuser&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;bucketLayout&#34;</span>: <span style="color:#e6db74">&#34;OBJECT_STORE&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;acls&#34;</span>: [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;USER&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;testuser&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;scope&#34;</span>: <span style="color:#e6db74">&#34;ACCESS&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;aclList&#34;</span>: [
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;WRITE&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;READ&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;DELETE&#34;</span>
</span></span><span style="display:flex;"><span>              ]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          ]
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>     }
</span></span></code></pre></div><h2 id="数据节点">数据节点</h2>
<h3 id="get-apiv1datanodes">GET /api/v1/datanodes</h3>
<p><strong>参数</strong></p>
<p>没有参数。</p>
<p><strong>回传</strong></p>
<p>回传集群中的所有数据节点。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;totalCount&#34;</span>: <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;datanodes&#34;</span>: [{
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;uuid&#34;</span>: <span style="color:#e6db74">&#34;f8f8cb45-3ab2-4123&#34;</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;hostname&#34;</span>: <span style="color:#e6db74">&#34;localhost-1&#34;</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;HEALTHY&#34;</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;lastHeartbeat&#34;</span>: <span style="color:#ae81ff">1605738400544</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;storageReport&#34;</span>: {
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;capacity&#34;</span>: <span style="color:#ae81ff">270429917184</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;used&#34;</span>: <span style="color:#ae81ff">358805504</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;remaining&#34;</span>: <span style="color:#ae81ff">119648149504</span>
</span></span><span style="display:flex;"><span>     		},
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;pipelines&#34;</span>: [{
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;pipelineID&#34;</span>: <span style="color:#e6db74">&#34;b9415b20-b9bd-4225&#34;</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;replicationType&#34;</span>: <span style="color:#e6db74">&#34;RATIS&#34;</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;replicationFactor&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;leaderNode&#34;</span>: <span style="color:#e6db74">&#34;localhost-2&#34;</span>
</span></span><span style="display:flex;"><span>     		}, {
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;pipelineID&#34;</span>: <span style="color:#e6db74">&#34;3bf4a9e9-69cc-4d20&#34;</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;replicationType&#34;</span>: <span style="color:#e6db74">&#34;RATIS&#34;</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;replicationFactor&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>     			<span style="color:#f92672">&#34;leaderNode&#34;</span>: <span style="color:#e6db74">&#34;localhost-1&#34;</span>
</span></span><span style="display:flex;"><span>     		}],
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;containers&#34;</span>: <span style="color:#ae81ff">17</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;leaderCount&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>     	},
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>     }
</span></span></code></pre></div><h2 id="管道">管道</h2>
<h3 id="get-apiv1pipelines">GET /api/v1/pipelines</h3>
<p><strong>参数</strong></p>
<p>没有参数</p>
<p><strong>回传</strong></p>
<p>回传在集群中的所有管道。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;totalCount&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;pipelines&#34;</span>: [{
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;pipelineId&#34;</span>: <span style="color:#e6db74">&#34;b9415b20-b9bd-4225&#34;</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;OPEN&#34;</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;leaderNode&#34;</span>: <span style="color:#e6db74">&#34;localhost-1&#34;</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;datanodes&#34;</span>: [<span style="color:#e6db74">&#34;localhost-1&#34;</span>, <span style="color:#e6db74">&#34;localhost-2&#34;</span>, <span style="color:#e6db74">&#34;localhost-3&#34;</span>],
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;lastLeaderElection&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;duration&#34;</span>: <span style="color:#ae81ff">23166128</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;leaderElections&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;replicationType&#34;</span>: <span style="color:#e6db74">&#34;RATIS&#34;</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;replicationFactor&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>     		<span style="color:#f92672">&#34;containers&#34;</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>     	},
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>     }
</span></span></code></pre></div><h2 id="任务">任务</h2>
<h3 id="get-apiv1taskstatus">GET /api/v1/task/status</h3>
<p><strong>参数</strong></p>
<p>没有参数</p>
<p><strong>回传</strong></p>
<p>回传所有 Recon 任务的状态。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>     [
</span></span><span style="display:flex;"><span>       {
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;taskName&#34;</span>: <span style="color:#e6db74">&#34;OmDeltaRequest&#34;</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;lastUpdatedTimestamp&#34;</span>: <span style="color:#ae81ff">1605724099147</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;lastUpdatedSeqNumber&#34;</span>: <span style="color:#ae81ff">186</span>
</span></span><span style="display:flex;"><span>       },
</span></span><span style="display:flex;"><span>       <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>     ]
</span></span></code></pre></div><h2 id="使用率">使用率</h2>
<h3 id="get-apiv1utilizationfilecount">GET /api/v1/utilization/fileCount</h3>
<p><strong>参数</strong></p>
<ul>
<li>
<p>volume (可选)</p>
<p>根据给定的卷名过滤结果。</p>
</li>
<li>
<p>bucket (可选)</p>
<p>根据给定的桶名过滤结果。</p>
</li>
<li>
<p>fileSize (可选)
根据给定的文件大小筛选结果。</p>
</li>
</ul>
<p><strong>回传</strong></p>
<p>回传不同文件范围内的文件计数，其中响应对象中的<code>fileSize</code>是文件大小范围的上限。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>     [{
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;volume&#34;</span>: <span style="color:#e6db74">&#34;vol-2-04168&#34;</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;bucket&#34;</span>: <span style="color:#e6db74">&#34;bucket-0-11685&#34;</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;fileSize&#34;</span>: <span style="color:#ae81ff">1024</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>     }, {
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;volume&#34;</span>: <span style="color:#e6db74">&#34;vol-2-04168&#34;</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;bucket&#34;</span>: <span style="color:#e6db74">&#34;bucket-1-41795&#34;</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;fileSize&#34;</span>: <span style="color:#ae81ff">1024</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>     }, {
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;volume&#34;</span>: <span style="color:#e6db74">&#34;vol-2-04168&#34;</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;bucket&#34;</span>: <span style="color:#e6db74">&#34;bucket-2-93377&#34;</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;fileSize&#34;</span>: <span style="color:#ae81ff">1024</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>     }, {
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;volume&#34;</span>: <span style="color:#e6db74">&#34;vol-2-04168&#34;</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;bucket&#34;</span>: <span style="color:#e6db74">&#34;bucket-3-50336&#34;</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;fileSize&#34;</span>: <span style="color:#ae81ff">1024</span>,
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&#34;count&#34;</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>     }]
</span></span></code></pre></div><h2 id="指标">指标</h2>
<h3 id="get-apiv1metricsapi">GET /api/v1/metrics/:api</h3>
<p><strong>参数</strong></p>
<p>请参阅 <a href="https://prometheus.io/docs/prometheus/latest/querying/api/">Prometheus HTTP API 参考</a> 以获取完整的查询文档。</p>
<p><strong>回传</strong></p>
<p>这是 Prometheus 的代理端点，并回传与 Prometheus 端点相同的响应。
示例：/api/v1/metrics/query?query=ratis_leader_election_electionCount</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&#34;data&#34;</span>: {
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;resultType&#34;</span>: <span style="color:#e6db74">&#34;vector&#34;</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;result&#34;</span>: [
</span></span><span style="display:flex;"><span>           {
</span></span><span style="display:flex;"><span>             <span style="color:#f92672">&#34;metric&#34;</span>: {
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">&#34;__name__&#34;</span>: <span style="color:#e6db74">&#34;ratis_leader_election_electionCount&#34;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">&#34;exported_instance&#34;</span>: <span style="color:#e6db74">&#34;33a5ac1d-8c65-4c74-a0b8-9314dfcccb42&#34;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">&#34;group&#34;</span>: <span style="color:#e6db74">&#34;group-03CA9397D54B&#34;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">&#34;instance&#34;</span>: <span style="color:#e6db74">&#34;ozone_datanode_1:9882&#34;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">&#34;job&#34;</span>: <span style="color:#e6db74">&#34;ozone&#34;</span>
</span></span><span style="display:flex;"><span>             },
</span></span><span style="display:flex;"><span>             <span style="color:#f92672">&#34;value&#34;</span>: [
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1599159384.455</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#34;5&#34;</span>
</span></span><span style="display:flex;"><span>             ]
</span></span><span style="display:flex;"><span>           }
</span></span><span style="display:flex;"><span>         ]
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>     }
</span></span></code></pre></div>

          
          <a class="btn  btn-success btn-lg" href="../../zh/interface/cli.html">Next >></a>
          
          </div>

        </div>
      </div>
    </div>
  </div>
    <div class="push"></div>
  </div>

  

<footer class="footer">
  <div class="container">
    <span class="small text-muted">
      Version: 2.0.0, Last Modified: March 14, 2024 <a class="hide-child link primary-color" href="https://github.com/apache/ozone/commit/92221930844a9040122cf4c92ee69bc5b3d759fb">9222193084</a>
    </span>
  </div>
</footer>



<script src="../../js/jquery-3.5.1.min.js"></script>
<script src="../../js/ozonedoc.js"></script>
<script src="../../js/bootstrap.min.js"></script>


</body>

</html>