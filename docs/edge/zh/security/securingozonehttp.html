

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="Apache Ozone Documentation">

    <title>Documentation for Apache Ozone</title>

    
    <link href="../../css/bootstrap.min.css" rel="stylesheet">

    
    <link href="../../css/ozonedoc.css" rel="stylesheet">

    
    
    <link href="../../swagger-resources/swagger-ui.css" rel="stylesheet">

    
    <script>
      var _paq = window._paq = window._paq || [];
      

       
      _paq.push(['disableCookies']);
      

      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="//analytics.apache.org/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '34']);
        var d=document, g=d.createElement('script'),
s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    

  </head>


<body>

  
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sidebar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="../../zh/index.html" class="navbar-left ozone-logo">
        <img src="../../ozone-logo-small.png"/>
      </a>
      <a class="navbar-brand hidden-xs" href="../../zh/index.html">
        Apache Ozone/HDDS Documentation
      </a>
      <a class="navbar-brand visible-xs-inline" href="#">Apache Ozone</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/apache/ozone">Source</a></li>
        <li><a href="https://ozone.apache.org">Apache Ozone</a></li>
        <li><a href="https://apache.org">ASF</a></li>
      </ul>
    </div>
  </div>
</nav>


  <div class="wrapper">
  <div class="container-fluid">
    <div class="row">
      
<div class="col-sm-2 col-md-2 sidebar" id="sidebar">
  <ul class="nav nav-sidebar">
    
    
        
            <li class="">
                
                   <a href="../../zh/index.html">
                

                    
                    <span>概述</span>
                </a>
            </li>
        
    
        
            <li class="">
                <a href="../../zh/start.html">
                    
                    <span>快速入门</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/start/productiondeployment.html">生产环境部署</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../../zh/concept.html">
                    
                    <span>概念</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/concept/overview.html">概览</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/concept/ozonemanager.html">Ozone Manager</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/concept/storagecontainermanager.html">Storage Container Manager</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/concept/datanodes.html">数据节点</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/concept/containers.html">Containers</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/concept/recon.html">Recon</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../../zh/feature.html">
                    
                    <span>特性</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/feature/decommission.html">Decommissioning</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/erasurecoding.html">纠删码</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/om-ha.html">高可用 OM</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/scm-ha.html">高可用 SCM</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/dn-merge-rocksdb.html">在DataNode上合并Container的RocksDB</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/prefixfso.html">基于前缀的文件系统优化</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/topology.html">拓扑感知能力</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/quota.html">Ozone 中的配额</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/recon.html">Recon 服务器</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/feature/reconfigurability.html">动态加载配置</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../../zh/security.html">
                    
                    <span>安全</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/security/secureozone.html">安全化 Ozone</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securingtde.html">透明数据加密</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/gdpr.html">Ozone 中的 GDPR</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securingdatanodes.html">安全化 Datanode</a>
                           
                        </li>
                    
                        <li class="active">
                           
                           <a href="../../zh/security/securingozonehttp.html">安全化 HTTP</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securings3.html">安全化 S3</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securityacls.html">Ozone 访问控制列表</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/security/securitywithranger.html">Apache Ranger</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../../zh/interface.html">
                    
                    <span>客户端接口</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/interface/cli.html">命令行接口</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                
                   <a href="../../zh/tools.html">
                

                    
                    <span>工具</span>
                </a>
            </li>
        
    
        
            <li class="">
                
                   <a href="../../zh/recipe.html">
                

                    
                    <span>使用配方</span>
                </a>
            </li>
        
    
        
            <li class="">
                <a href="../../">
                    
                    <span></span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../../zh/interface/javaapi.html">Java API</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/interface/ofs.html">Ofs (兼容 Hadoop 的文件系统)</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/interface/o3fs.html">Ozone 文件系统</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/interface/csi.html">CSI 协议</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/interface/s3.html">S3 协议接口</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../../zh/interface/reconapi.html">Recon API</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
    <li><a href="../../design.html"><span><b>Design docs</b></span></a></li>
    <li class="visible-xs"><a href="#">References</a>
    <ul class="nav">
        <li><a href="https://github.com/apache/ozone"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> Source</a></li>
        <li><a href="https://ozone.apache.org"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> Apache Ozone</a></li>
        <li><a href="https://apache.org"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> ASF</a></li>
    </ul></li>
  </ul>

</div>

      <div class="col-sm-10 col-sm-offset-2 col-md-10 col-md-offset-2 main-content">



        <div class="col-md-9">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="../../zh/index.html">Home</a></li>
                  <li class="breadcrumb-item" aria-current="page"><a href="../../zh/security.html">安全</a></li>
                  <li class="breadcrumb-item active" aria-current="page">安全化 HTTP</li>
                </ol>
              </nav>

          

<div class="pull-right">
    
    
    
    <a href="../../security/securingozonehttp.html"><span class="label label-success">English</span></a>
    
    
    
    
</div>


          <div class="col-md-9">
            <h1>安全化 HTTP</h1>

            <!---
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<p>本文档介绍了如何配置 Ozone HTTP Web 控制台以要求用户身份验证。</p>
<h3 id="默认身份验证">默认身份验证</h3>
<p>默认情况下 Ozone HTTP Web 控制台 (OM、SCM、S3G、Recon、Datanode) 根据以下默认配置允许无需身份验证的访问。</p>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ozone.security.http.kerberos.enabled</td>
          <td>false</td>
      </tr>
      <tr>
          <td>ozone.http.filter.initializers</td>
          <td><empty></td>
      </tr>
  </tbody>
</table>
<p>如果您有一个启用了 SPNEGO 的 Ozone 集群,并且想要为所有 Ozone 服务禁用它,只需确保按上述两个参数配置即可。</p>
<h3 id="基于-kerberos-的-spnego-身份验证">基于 Kerberos 的 SPNEGO 身份验证</h3>
<p>身份验证也可以配置为要求使用 HTTP SPNEGO 协议（被 Firefox 和 Chrome 等浏览器所支持）。为了实现这一点，必须先配置以下参数。</p>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>hadoop.security.authentication</td>
          <td>kerberos</td>
      </tr>
      <tr>
          <td>ozone.security.http.kerberos.enabled</td>
          <td>true</td>
      </tr>
      <tr>
          <td>ozone.http.filter.initializers</td>
          <td>org.apache.hadoop.security.AuthenticationFilterInitializer</td>
      </tr>
  </tbody>
</table>
<p>之后，各个组件需要正确配置才能完全启用 SPNEGO 或 SIMPLE 身份验证。</p>
<h3 id="为-om-http-启用-spnego-身份验证">为 OM HTTP 启用 SPNEGO 身份验证</h3>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ozone.om.http.auth.type</td>
          <td>kerberos</td>
      </tr>
      <tr>
          <td>ozone.om.http.auth.kerberos.principal</td>
          <td>HTTP/_HOST@REALM</td>
      </tr>
      <tr>
          <td>ozone.om.http.auth.kerberos.keytab</td>
          <td>/path/to/HTTP.keytab</td>
      </tr>
  </tbody>
</table>
<h3 id="为-s3g-http-启用-spnego-身份验证">为 S3G HTTP 启用 SPNEGO 身份验证</h3>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ozone.s3g.http.auth.type</td>
          <td>kerberos</td>
      </tr>
      <tr>
          <td>ozone.s3g.http.auth.kerberos.principal</td>
          <td>HTTP/_HOST@REALM</td>
      </tr>
      <tr>
          <td>ozone.s3g.http.auth.kerberos.keytab</td>
          <td>/path/to/HTTP.keytab</td>
      </tr>
  </tbody>
</table>
<h3 id="为-recon-http-启用-spnego-身份验证">为 RECON HTTP 启用 SPNEGO 身份验证</h3>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ozone.recon.http.auth.type</td>
          <td>kerberos</td>
      </tr>
      <tr>
          <td>ozone.recon.http.auth.kerberos.principal</td>
          <td>HTTP/_HOST@REALM</td>
      </tr>
      <tr>
          <td>ozone.recon.http.auth.kerberos.keytab</td>
          <td>/path/to/HTTP.keytab</td>
      </tr>
  </tbody>
</table>
<h3 id="为-scm-http-启用-spnego-身份验证">为 SCM HTTP 启用 SPNEGO 身份验证</h3>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>hdds.scm.http.auth.type</td>
          <td>kerberos</td>
      </tr>
      <tr>
          <td>hdds.scm.http.auth.kerberos.principal</td>
          <td>HTTP/_HOST@REALM</td>
      </tr>
      <tr>
          <td>hdds.scm.http.auth.kerberos.keytab</td>
          <td>/path/to/HTTP.keytab</td>
      </tr>
  </tbody>
</table>
<h3 id="为-datanode-http-启用-spnego-身份验证">为 DATANODE HTTP 启用 SPNEGO 身份验证</h3>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>hdds.datanode.http.auth.type</td>
          <td>kerberos</td>
      </tr>
      <tr>
          <td>hdds.datanode.http.auth.kerberos.principal</td>
          <td>HTTP/_HOST@REALM</td>
      </tr>
      <tr>
          <td>hdds.datanode.http.auth.kerberos.keytab</td>
          <td>/path/to/HTTP.keytab</td>
      </tr>
  </tbody>
</table>
<p>注意： Ozone datanode 没有默认网页，这会阻止您访问“/”或“/index.html”。但它通过 HTTP 提供了标准 Java Servlet，如 jmx/conf/jstack。</p>
<p>此外，Ozone HTTP Web 控制台支持相当于 Hadoop 的 Pseudo/Simple 身份验证。 如果启用此选项，则必须在第一次与浏览器交互中使用 user.name 指定用户名查询字符串参数。例如，http://scm:9876/?user.name=scmadmin。</p>
<h3 id="为-om-http-启用-simple-身份验证">为 OM HTTP 启用 SIMPLE 身份验证</h3>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ozone.om.http.auth.type</td>
          <td>simple</td>
      </tr>
      <tr>
          <td>ozone.om.http.auth.simple.anonymous.allowed</td>
          <td>false</td>
      </tr>
  </tbody>
</table>
<p>如果您不想在查询字符串参数中指定 user.name，更改 ozone.om.http.auth.simple.anonymous.allowed 为 true。</p>
<h3 id="为-s3g-http-启用-simple-身份验证">为 S3G HTTP 启用 SIMPLE 身份验证</h3>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ozone.s3g.http.auth.type</td>
          <td>simple</td>
      </tr>
      <tr>
          <td>ozone.s3g.http.auth.simple.anonymous.allowed</td>
          <td>false</td>
      </tr>
  </tbody>
</table>
<p>如果您不想在查询字符串参数中指定 user.name，更改 ozone.s3g.http.auth.simple.anonymous.allowed 为 true。</p>
<h3 id="为-recon-http-启用-simple-身份验证">为 RECON HTTP 启用 SIMPLE 身份验证</h3>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ozone.recon.http.auth.type</td>
          <td>simple</td>
      </tr>
      <tr>
          <td>ozone.recon.http.auth.simple.anonymous.allowed</td>
          <td>false</td>
      </tr>
  </tbody>
</table>
<p>如果您不想在查询字符串参数中指定 user.name，更改 ozone.recon.http.auth.simple.anonymous.allowed 为 true。</p>
<h3 id="为-scm-http-启用-simple-身份验证">为 SCM HTTP 启用 SIMPLE 身份验证</h3>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>hdds.scm.http.auth.type</td>
          <td>simple</td>
      </tr>
      <tr>
          <td>hdds.scm.http.auth.simple.anonymous.allowed</td>
          <td>false</td>
      </tr>
  </tbody>
</table>
<p>如果您不想在查询字符串参数中指定 user.name，更改 hdds.scm.http.auth.simple.anonymous.allowed 为 true。</p>
<h3 id="为-datanode-http-启用-simple-身份验证">为 DATANODE HTTP 启用 SIMPLE 身份验证</h3>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>值</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>hdds.datanode.http.auth.type</td>
          <td>simple</td>
      </tr>
      <tr>
          <td>hdds.datanode.http.auth.simple.anonymous.allowed</td>
          <td>false</td>
      </tr>
  </tbody>
</table>
<p>如果您不想在查询字符串参数中指定 user.name，更改 hdds.datanode.http.auth.simple.anonymous.allowed 为 true。</p>


          
          <a class="btn  btn-success btn-lg" href="../../zh/security/securings3.html">Next >></a>
          
          </div>

        </div>
      </div>
    </div>
  </div>
    <div class="push"></div>
  </div>

  

<footer class="footer">
  <div class="container">
    <span class="small text-muted">
      Version: 2.2.0-SNAPSHOT, Last Modified: October 21, 2024 <a class="hide-child link primary-color" href="https://github.com/apache/ozone/commit/8568075ddb75b4a6785cdb31b00b4a592058dc78">8568075ddb</a>
    </span>
  </div>
</footer>



<script src="../../js/jquery-3.5.1.min.js"></script>
<script src="../../js/ozonedoc.js"></script>
<script src="../../js/bootstrap.min.js"></script>


</body>

</html>