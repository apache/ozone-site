

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="Apache Ozone Documentation">

    <title>Documentation for Apache Ozone</title>

    
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    
    <link href="../css/ozonedoc.css" rel="stylesheet">

    
    
    <link href="../swagger-resources/swagger-ui.css" rel="stylesheet">

    
    <script>
      var _paq = window._paq = window._paq || [];
      

       
      _paq.push(['disableCookies']);
      

      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="//analytics.apache.org/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '34']);
        var d=document, g=d.createElement('script'),
s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    

  </head>


<body>

  
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sidebar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="../index.html" class="navbar-left ozone-logo">
        <img src="../ozone-logo-small.png"/>
      </a>
      <a class="navbar-brand hidden-xs" href="../index.html">
        Apache Ozone/HDDS Documentation
      </a>
      <a class="navbar-brand visible-xs-inline" href="#">Apache Ozone</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/apache/ozone">Source</a></li>
        <li><a href="https://ozone.apache.org">Apache Ozone</a></li>
        <li><a href="https://apache.org">ASF</a></li>
      </ul>
    </div>
  </div>
</nav>


  <div class="wrapper">
  <div class="container-fluid">
    <div class="row">
      
<div class="col-sm-2 col-md-2 sidebar" id="sidebar">
  <ul class="nav nav-sidebar">
    
    
        
            <li class="">
                
                   <a href="../index.html">
                

                    
                    <span>Overview</span>
                </a>
            </li>
        
    
        
            <li class="">
                <a href="../start.html">
                    
                    <span>Getting Started</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../start/productiondeployment.html">Production Deployment</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../concept.html">
                    
                    <span>Architecture</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../concept/overview.html">Overview</a>
                           
                        </li>
                    
                        <li class="">
                           
                               <a href="../concept/ozonemanager.html">
                                 
                                 <span>Ozone Manager</span>
                               </a>
                               <ul class="nav">
                               
                                  <li class="">
                                     <a href="../concept/volumesbucketskeys.html">Volumes, Buckets, and Keys</a>
                                  </li>
                               
                               </ul>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../concept/storagecontainermanager.html">Storage Container Manager</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../concept/containers.html">Containers</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../concept/datanodes.html">Datanodes</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../concept/ozones3gateway.html">Ozone S3 Gateway</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../concept/recon.html">Recon</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../concept/networkports.html">Network Ports</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../concept/comparison.html">Comparison with Other Storage Technologies</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../feature.html">
                    
                    <span>Features</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../feature/decommission.html">Decommissioning</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/om-ha.html">OM High Availability</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/erasurecoding.html">Ozone Erasure Coding</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/snapshot.html">Ozone Snapshot</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/scm-ha.html">SCM High Availability</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/streaming-write-pipeline.html">Streaming Write Pipeline</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/dn-merge-rocksdb.html">Merge Container RocksDB in DN</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/prefixfso.html">Prefix based File System Optimization</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/topology.html">Topology awareness</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/quota.html">Quota in Ozone</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/recon.html">Recon Server</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/observability.html">Observability</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/nonrolling-upgrade.html">Non-Rolling Upgrades and Downgrades</a>
                           
                        </li>
                    
                        <li class="">
                           
                               <a href="../feature/s3-multi-tenancy.html">
                                 
                                 <span>S3 Multi-Tenancy</span>
                               </a>
                               <ul class="nav">
                               
                                  <li class="">
                                     <a href="../feature/s3-multi-tenancy-setup.html">Setup</a>
                                  </li>
                               
                                  <li class="">
                                     <a href="../feature/s3-tenant-commands.html">Tenant commands</a>
                                  </li>
                               
                                  <li class="">
                                     <a href="../feature/s3-multi-tenancy-access-control.html">Access Control</a>
                                  </li>
                               
                               </ul>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/reconfigurability.html">Reconfigurability</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/containerbalancer.html">Container Balancer</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/maintenance.html">Maintenance Mode</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/multi-raft-support.html">Multi-Raft Support in Ozone</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../feature/trash.html">Trash</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../integration.html">
                    
                    <span>Application Integrations</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../integration/distcp.html">Hadoop DistCp</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../integration/hive.html">Hive</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../integration/impala.html">Impala</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../interface.html">
                    
                    <span>Client Interfaces</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../interface/ofs.html">Ofs (Hadoop compatible)</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../interface/o3fs.html">O3fs (Hadoop compatible)</a>
                           
                        </li>
                    
                        <li class="">
                           
                               <a href="../interface/s3.html">
                                 
                                 <span>S3 Protocol</span>
                               </a>
                               <ul class="nav">
                               
                                  <li class="">
                                     <a href="../interface/cyberduckozones3.html">Accessing Ozone S3 via CyberDuck</a>
                                  </li>
                               
                               </ul>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../interface/cli.html">Command Line Interface</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../interface/reconapi.html">Recon API</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../interface/javaapi.html">Java API</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../interface/python.html">Accessing Apache Ozone from Python</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../interface/csi.html">CSI Protocol</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../interface/httpfs.html">HttpFS Gateway</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../interface/native-cpp.html">Native C/C&#43;&#43; Client Access to Ozone</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                <a href="../security.html">
                    
                    <span>Security</span>
                </a>
                <ul class="nav">
                    
                        <li class="">
                           
                           <a href="../security/secureozone.html">Securing Ozone</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../security/securingtde.html">Transparent Data Encryption</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../security/gdpr.html">GDPR in Ozone</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../security/securingdatanodes.html">Securing Datanodes</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../security/securingozonehttp.html">Securing HTTP</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../security/securings3.html">Securing S3</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../security/securityacls.html">Ozone ACLs</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../security/protect-in-transit-traffic.html">Protect In-Transit Traffic</a>
                           
                        </li>
                    
                        <li class="">
                           
                           <a href="../security/securitywithranger.html">Apache Ranger</a>
                           
                        </li>
                    
                </ul>
            </li>
        
    
        
            <li class="">
                
                   <a href="../tools.html">
                

                    
                    <span>Tools</span>
                </a>
            </li>
        
    
        
            <li class="">
                
                   <a href="../recipe.html">
                

                    
                    <span>Recipes</span>
                </a>
            </li>
        
    
        
            <li class="">
                
                   <a href="../troubleshooting.html">
                

                    
                    <span>Troubleshooting</span>
                </a>
            </li>
        
    
    <li><a href="../design.html"><span><b>Design docs</b></span></a></li>
    <li class="visible-xs"><a href="#">References</a>
    <ul class="nav">
        <li><a href="https://github.com/apache/ozone"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> Source</a></li>
        <li><a href="https://ozone.apache.org"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> Apache Ozone</a></li>
        <li><a href="https://apache.org"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> ASF</a></li>
    </ul></li>
  </ul>

</div>

      <div class="col-sm-10 col-sm-offset-2 col-md-10 col-md-offset-2 main-content">



        <div class="col-md-9">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="../index.html">Home</a></li>
                  <li class="breadcrumb-item" aria-current="page"><a href="../tools.html">Tools</a></li>
                  <li class="breadcrumb-item active" aria-current="page">Ozone Debug</li>
                </ol>
              </nav>

          

<div class="pull-right">
    
    
    
    
    
    <a href="../zh/tools/debug.html"><span class="label label-success">中文</span></a>
    
    
</div>


          <div class="col-md-9">
            <h1>Ozone Debug</h1>

            <!---
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<p>Ozone Debug command (<code>ozone debug</code>) is a collection of developer tools intended to help in debugging and get more information of various components of ozone.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Usage: ozone debug <span style="color:#f92672">[</span>-hV<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--verbose<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-conf<span style="color:#f92672">=</span>&lt;configurationPath&gt;<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                   <span style="color:#f92672">[</span>-D<span style="color:#f92672">=</span>&lt;String<span style="color:#f92672">=</span>String&gt;<span style="color:#f92672">]</span>... <span style="color:#f92672">[</span>COMMAND<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Developer tools <span style="color:#66d9ef">for</span> Ozone Debug operations
</span></span><span style="display:flex;"><span>      -conf<span style="color:#f92672">=</span>&lt;configurationPath&gt;
</span></span><span style="display:flex;"><span>                  path to the ozone configuration file
</span></span><span style="display:flex;"><span>  -D, --set<span style="color:#f92672">=</span>&lt;String<span style="color:#f92672">=</span>String&gt;
</span></span><span style="display:flex;"><span>                  Map of <span style="color:#f92672">(</span>configuration_key,configuration_value<span style="color:#f92672">)</span> <span style="color:#66d9ef">for</span> any 
</span></span><span style="display:flex;"><span>                    configuration overrides
</span></span><span style="display:flex;"><span>  -h, --help      Show this help message and exit.
</span></span><span style="display:flex;"><span>  -V, --version   Print version information and exit.
</span></span><span style="display:flex;"><span>      --verbose   More verbose output. Show the stack trace of the errors.
</span></span><span style="display:flex;"><span>Commands:
</span></span><span style="display:flex;"><span>  chunkinfo                  returns chunk location information about an
</span></span><span style="display:flex;"><span>                               existing key
</span></span><span style="display:flex;"><span>  print-log-dag, pld         Create an image of the current compaction log DAG
</span></span><span style="display:flex;"><span>                               in OM.
</span></span><span style="display:flex;"><span>  find-missing-padding, fmp  List all keys with any missing padding, optionally
</span></span><span style="display:flex;"><span>                               limited to a volume/bucket/key URI.
</span></span><span style="display:flex;"><span>  recover                    recover the lease of a specified file. Make sure
</span></span><span style="display:flex;"><span>                               to specify file system scheme <span style="color:#66d9ef">if</span> ofs:// is not
</span></span><span style="display:flex;"><span>                               the default.
</span></span><span style="display:flex;"><span>  prefix                     Parse prefix contents
</span></span><span style="display:flex;"><span>  ldb                        Parse rocksdb file content
</span></span><span style="display:flex;"><span>  read-replicas              Reads every replica <span style="color:#66d9ef">for</span> all the blocks associated
</span></span><span style="display:flex;"><span>                               with a given key.
</span></span><span style="display:flex;"><span>  container                  Container replica specific operations to be
</span></span><span style="display:flex;"><span>                               executed on datanodes only
</span></span><span style="display:flex;"><span>  ratislogparser             Shell of printing Ratis Log in understandable text
</span></span></code></pre></div><p>For more detailed usage see the output of <code>--help</code> for each of the subcommands.</p>
<h2 id="ozone-debug-ldb">ozone debug ldb</h2>
<p>Ozone heavily uses RocksDB for storing metadata. This tool helps parse the contents of RocksDB belonging to Ozone Roles.
Supported DB&rsquo;s : Ozone Manager (om.db) , StorageContainerManager (scm.db),  Datanode/Container (container.db)
Below is the usage:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Usage: ozone debug ldb --db<span style="color:#f92672">=</span>&lt;dbPath&gt; <span style="color:#f92672">[</span>COMMAND<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Parse rocksdb file content
</span></span><span style="display:flex;"><span>      --db<span style="color:#f92672">=</span>&lt;dbPath&gt;   Database File Path
</span></span><span style="display:flex;"><span>Commands:
</span></span><span style="display:flex;"><span>  scan                      Parse specified metadataTable
</span></span><span style="display:flex;"><span>  list_column_families, ls  list all column families in db.
</span></span><span style="display:flex;"><span>  value-schema              Schema of value in metadataTable
</span></span></code></pre></div><h3 id="list_column_families-command">list_column_families command</h3>
<p><code>list_column_families</code> command lists all the column families in the db provided.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ozone debug ldb --db<span style="color:#f92672">=</span>/path/to/scm.db ls
</span></span><span style="display:flex;"><span>default
</span></span><span style="display:flex;"><span>sequenceId
</span></span><span style="display:flex;"><span>revokedCertsV2
</span></span><span style="display:flex;"><span>pipelines
</span></span><span style="display:flex;"><span>crls
</span></span><span style="display:flex;"><span>crlSequenceId
</span></span><span style="display:flex;"><span>meta
</span></span><span style="display:flex;"><span>containers
</span></span><span style="display:flex;"><span>validCerts
</span></span><span style="display:flex;"><span>validSCMCerts
</span></span><span style="display:flex;"><span>scmTransactionInfos
</span></span><span style="display:flex;"><span>deletedBlocks
</span></span><span style="display:flex;"><span>statefulServiceConfig
</span></span><span style="display:flex;"><span>revokedCerts
</span></span><span style="display:flex;"><span>move
</span></span></code></pre></div><h3 id="scan-command">scan command</h3>
<p><code>scan</code> command parses a particular column family of a rocksdb provided and prints the records.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Usage: ozone debug ldb scan <span style="color:#f92672">[</span>--compact<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--count<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--with-keys<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">[</span>--batch-size<span style="color:#f92672">=</span>&lt;batchSize&gt;<span style="color:#f92672">]</span> --cf<span style="color:#f92672">=</span>&lt;tableName&gt;
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">[</span>--cid<span style="color:#f92672">=</span>&lt;containerId&gt;<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-d<span style="color:#f92672">=</span>&lt;dnDBSchemaVersion&gt;<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">[</span>-e<span style="color:#f92672">=</span>&lt;endKey&gt;<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--fields<span style="color:#f92672">=</span>&lt;fieldsFilter&gt;<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">[</span>--filter<span style="color:#f92672">=</span>&lt;filter&gt;<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-l<span style="color:#f92672">=</span>&lt;limit&gt;<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>-o<span style="color:#f92672">=</span>&lt;fileName&gt;<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">[</span>-s<span style="color:#f92672">=</span>&lt;startKey&gt;<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--thread-count<span style="color:#f92672">=</span>&lt;threadCount&gt;<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Parse specified metadataTable
</span></span><span style="display:flex;"><span>      --batch-size<span style="color:#f92672">=</span>&lt;batchSize&gt;
</span></span><span style="display:flex;"><span>                          Batch size <span style="color:#66d9ef">for</span> processing DB data.
</span></span><span style="display:flex;"><span>      --cf, --column_family, --column-family<span style="color:#f92672">=</span>&lt;tableName&gt;
</span></span><span style="display:flex;"><span>                          Table name
</span></span><span style="display:flex;"><span>      --cid, --container-id<span style="color:#f92672">=</span>&lt;containerId&gt;
</span></span><span style="display:flex;"><span>                          Container ID. Applicable <span style="color:#66d9ef">if</span> datanode DB Schema is V3
</span></span><span style="display:flex;"><span>      --compact           disable the pretty print the output
</span></span><span style="display:flex;"><span>      --count, --show-count
</span></span><span style="display:flex;"><span>                          Get estimated key count <span style="color:#66d9ef">for</span> the given DB column family
</span></span><span style="display:flex;"><span>                            Default: false
</span></span><span style="display:flex;"><span>  -d, --dnSchema, --dn-schema<span style="color:#f92672">=</span>&lt;dnDBSchemaVersion&gt;
</span></span><span style="display:flex;"><span>                          Datanode DB Schema Version: V1/V2/V3
</span></span><span style="display:flex;"><span>  -e, --ek, --endkey<span style="color:#f92672">=</span>&lt;endKey&gt;
</span></span><span style="display:flex;"><span>                          Key at which iteration of the DB ends
</span></span><span style="display:flex;"><span>      --fields<span style="color:#f92672">=</span>&lt;fieldsFilter&gt;
</span></span><span style="display:flex;"><span>                          Comma-separated list of fields needed <span style="color:#66d9ef">for</span> each value.
</span></span><span style="display:flex;"><span>                            eg.<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;name,acls.type&#34;</span> <span style="color:#66d9ef">for</span> showing name and type
</span></span><span style="display:flex;"><span>                            under acls.
</span></span><span style="display:flex;"><span>      --filter<span style="color:#f92672">=</span>&lt;filter&gt;   Comma-separated list of <span style="color:#e6db74">&#34;&lt;field&gt;:&lt;operator&gt;:&lt;value&gt;&#34;</span>
</span></span><span style="display:flex;"><span>                            where &lt;field&gt; is any valid field of the record,
</span></span><span style="display:flex;"><span>                            &lt;operator&gt; is <span style="color:#f92672">[</span>EQUALS,LESSER, GREATER or REGEX<span style="color:#f92672">]</span>.
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">(</span>EQUALS compares the exact string, REGEX compares
</span></span><span style="display:flex;"><span>                            with a valid regular expression passed, and
</span></span><span style="display:flex;"><span>                            LESSER/GREATER works with numeric values<span style="color:#f92672">)</span>, &lt;value&gt;
</span></span><span style="display:flex;"><span>                            is the value of the field.
</span></span><span style="display:flex;"><span>                          eg.<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;dataSize:equals:1000&#34;</span> <span style="color:#66d9ef">for</span> showing records
</span></span><span style="display:flex;"><span>                            having the value <span style="color:#ae81ff">1000</span> <span style="color:#66d9ef">for</span> dataSize,
</span></span><span style="display:flex;"><span>                               <span style="color:#e6db74">&#34;keyName:regex:^key.*</span>$<span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">for</span> showing records
</span></span><span style="display:flex;"><span>                            having keyName that matches the given regex.
</span></span><span style="display:flex;"><span>  -l, --limit, --length<span style="color:#f92672">=</span>&lt;limit&gt;
</span></span><span style="display:flex;"><span>                          Maximum number of items to list.
</span></span><span style="display:flex;"><span>  -o, --out<span style="color:#f92672">=</span>&lt;fileName&gt;    File to dump table scan data
</span></span><span style="display:flex;"><span>  -s, --sk, --startkey<span style="color:#f92672">=</span>&lt;startKey&gt;
</span></span><span style="display:flex;"><span>                          Key from which to iterate the DB
</span></span><span style="display:flex;"><span>      --thread-count<span style="color:#f92672">=</span>&lt;threadCount&gt;
</span></span><span style="display:flex;"><span>                          Thread count <span style="color:#66d9ef">for</span> concurrent processing.
</span></span><span style="display:flex;"><span>      --with-keys         Print a JSON object of key-&gt;value pairs <span style="color:#f92672">(</span>default<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                            instead of a JSON array of only values.
</span></span></code></pre></div><p>By default, the contents are printed on the console, but it can be redirected to a file using the <code>--out</code> option. <br>
<code>--length</code> can be used to limit the number of records being printed. <br>
<code>--count</code> doesn&rsquo;t print the records, it shows the approximate number of records. This is not accurate. <br>
<code>ozone debug ldb scan</code> command provides many filtering options to make debugging easier, elaborated below: <br></p>
<div class="alert alert-success" role="alert">
  Multiple filtering options can be used together in a single command.
</div>
<h4 id="--startkey-and---endkey">&ndash;startkey and &ndash;endkey</h4>
<p>As the names suggest, these options specify the keys from/until which the iteration needs to happen.  <br>
<code>--startkey</code> specifies which key to start iterating from, it is inclusive. <code>--endkey</code> specifies which key to stop iterating at, it is exclusive.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ozone debug ldb --db<span style="color:#f92672">=</span>/path/to/om.db scan --cf<span style="color:#f92672">=</span>volumeTable --startkey<span style="color:#f92672">=</span>vol3 --endkey<span style="color:#f92672">=</span>vol5
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{ <span style="color:#f92672">&#34;/vol3&#34;</span>: {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;metadata&#34;</span> : { },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;objectID&#34;</span> : <span style="color:#ae81ff">-9999</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;updateID&#34;</span> : <span style="color:#ae81ff">4000</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;adminName&#34;</span> : <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ownerName&#34;</span> : <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;volume&#34;</span> : <span style="color:#e6db74">&#34;vol3&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;creationTime&#34;</span> : <span style="color:#ae81ff">1707192335309</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;modificationTime&#34;</span> : <span style="color:#ae81ff">1714057412205</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;quotaInBytes&#34;</span> : <span style="color:#ae81ff">22854448694951936</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;quotaInNamespace&#34;</span> : <span style="color:#ae81ff">100000000</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;usedNamespace&#34;</span> : <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;acls&#34;</span> : [ {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;type&#34;</span> : <span style="color:#e6db74">&#34;USER&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;aclScope&#34;</span> : <span style="color:#e6db74">&#34;ACCESS&#34;</span>
</span></span><span style="display:flex;"><span>  } ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;refCount&#34;</span> : <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>, <span style="color:#f92672">&#34;/vol4&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;metadata&#34;</span> : { },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;objectID&#34;</span> : <span style="color:#ae81ff">-888</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;updateID&#34;</span> : <span style="color:#ae81ff">5000</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;adminName&#34;</span> : <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ownerName&#34;</span> : <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;volume&#34;</span> : <span style="color:#e6db74">&#34;vol4&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;creationTime&#34;</span> : <span style="color:#ae81ff">1696280979907</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;modificationTime&#34;</span> : <span style="color:#ae81ff">1696280979907</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;quotaInBytes&#34;</span> : <span style="color:#ae81ff">2251799813685250</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;quotaInNamespace&#34;</span> : <span style="color:#ae81ff">100000000</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;usedNamespace&#34;</span> : <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;acls&#34;</span> : [ {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span> : <span style="color:#e6db74">&#34;USER&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;aclScope&#34;</span> : <span style="color:#e6db74">&#34;ACCESS&#34;</span>
</span></span><span style="display:flex;"><span>    } ],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;refCount&#34;</span> : <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><h4 id="--fields">&ndash;fields</h4>
<p>There are multiple fields in each record. <code>--fields</code> option allows us to choose the specific fields to display.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ozone debug ldb --db<span style="color:#f92672">=</span>/path/to/om.db scan --cf<span style="color:#f92672">=</span>keyTable -l<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> --fields<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;volumeName,bucketName,keyName,keyLocationVersions.version,acls.name&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{ <span style="color:#f92672">&#34;/vol1/ozone-legacy-bucket/10T-1-terasort-input/&#34;</span>: {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;keyLocationVersions&#34;</span> : [ {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;version&#34;</span> : <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  } ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;keyName&#34;</span> : <span style="color:#e6db74">&#34;10T-1-terasort-input/&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;bucketName&#34;</span> : <span style="color:#e6db74">&#34;ozone-legacy-bucket&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;acls&#34;</span> : [ {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;om&#34;</span>
</span></span><span style="display:flex;"><span>  }, {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;scm&#34;</span>
</span></span><span style="display:flex;"><span>  }, {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;testuser&#34;</span>
</span></span><span style="display:flex;"><span>  } ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;volumeName&#34;</span> : <span style="color:#e6db74">&#34;vol1&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="--filter">&ndash;filter</h4>
<p><code>--filter</code> can be used to select records whose value matches a given condition. The filter is given in this format: <code>&lt;field&gt;:&lt;operator&gt;:&lt;value&gt;</code>,
where <code>&lt;field&gt;</code> is any valid field from the value of the record, <code>&lt;operator&gt;</code> is one of the 4 supported operations <code>[equals, regex, lesser, greater]</code>, <code>&lt;value&gt;</code> is the value used for the comparison. <br>
&lsquo;Equals&rsquo; and &lsquo;regex&rsquo; work with string, bool and numerical fields, &rsquo;lesser&rsquo; and &lsquo;greater&rsquo; work only with numerical values.  <br>
Multiple filters can also be given in one command, they need to be separated by commas.  <br>
Using <code>equals</code> operator:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ozone debug ldb --db<span style="color:#f92672">=</span>/path/to/om.db scan --cf<span style="color:#f92672">=</span>volumeTable --filter<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;usedNamespace:equals:2&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;/vol4&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;metadata&#34;</span>: {},
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;objectID&#34;</span>: <span style="color:#ae81ff">-888</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;updateID&#34;</span>: <span style="color:#ae81ff">5000</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;adminName&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ownerName&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;volume&#34;</span>: <span style="color:#e6db74">&#34;vol4&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;creationTime&#34;</span>: <span style="color:#ae81ff">1696280979907</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;modificationTime&#34;</span>: <span style="color:#ae81ff">1696280979907</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;quotaInBytes&#34;</span>: <span style="color:#ae81ff">2251799813685250</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;quotaInNamespace&#34;</span>: <span style="color:#ae81ff">100000000</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;usedNamespace&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;acls&#34;</span>: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;USER&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;aclScope&#34;</span>: <span style="color:#e6db74">&#34;ACCESS&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;refCount&#34;</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>, <span style="color:#f92672">&#34;/vol5&#34;</span>: {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;metadata&#34;</span> : { },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;objectID&#34;</span> : <span style="color:#ae81ff">-956599</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;updateID&#34;</span> : <span style="color:#ae81ff">45600</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;adminName&#34;</span> : <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ownerName&#34;</span> : <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;volume&#34;</span> : <span style="color:#e6db74">&#34;vol5&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;creationTime&#34;</span> : <span style="color:#ae81ff">1807192332309</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;modificationTime&#34;</span> : <span style="color:#ae81ff">1914057410005</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;quotaInBytes&#34;</span> : <span style="color:#ae81ff">7785494951936</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;quotaInNamespace&#34;</span> : <span style="color:#ae81ff">100000000</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;usedNamespace&#34;</span> : <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;acls&#34;</span> : [ {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;type&#34;</span> : <span style="color:#e6db74">&#34;USER&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;aclScope&#34;</span> : <span style="color:#e6db74">&#34;ACCESS&#34;</span>
</span></span><span style="display:flex;"><span>  } ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;refCount&#34;</span> : <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><p>Using <code>lesser</code> operator (<code>greater</code> operator can also be used in the same way):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ozone debug ldb --db<span style="color:#f92672">=</span>/path/to/om.db scan --cf<span style="color:#f92672">=</span>volumeTable --filter<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;usedNamespace:lesser:2&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;/vol2&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;metadata&#34;</span>: {},
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;objectID&#34;</span>: <span style="color:#ae81ff">-73548</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;updateID&#34;</span>: <span style="color:#ae81ff">2384</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;adminName&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ownerName&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;volume&#34;</span>: <span style="color:#e6db74">&#34;vol2&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;creationTime&#34;</span>: <span style="color:#ae81ff">11980979907</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;modificationTime&#34;</span>: <span style="color:#ae81ff">1296280979900</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;quotaInBytes&#34;</span>: <span style="color:#ae81ff">417913685250</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;quotaInNamespace&#34;</span>: <span style="color:#ae81ff">100000000</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;usedNamespace&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;acls&#34;</span>: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;USER&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;aclScope&#34;</span>: <span style="color:#e6db74">&#34;ACCESS&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;refCount&#34;</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><p>Using <code>regex</code> operator:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ozone debug ldb --db<span style="color:#f92672">=</span>/path/to/om.db scan --cf<span style="color:#f92672">=</span>volumeTable --filter<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;volume:regex:^v.*2</span>$<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;/vol2&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;metadata&#34;</span>: {},
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;objectID&#34;</span>: <span style="color:#ae81ff">-73548</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;updateID&#34;</span>: <span style="color:#ae81ff">2384</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;adminName&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ownerName&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;volume&#34;</span>: <span style="color:#e6db74">&#34;vol2&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;creationTime&#34;</span>: <span style="color:#ae81ff">11980979907</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;modificationTime&#34;</span>: <span style="color:#ae81ff">1296280979900</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;quotaInBytes&#34;</span>: <span style="color:#ae81ff">417913685250</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;quotaInNamespace&#34;</span>: <span style="color:#ae81ff">100000000</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;usedNamespace&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;acls&#34;</span>: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;USER&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;aclScope&#34;</span>: <span style="color:#e6db74">&#34;ACCESS&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;refCount&#34;</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><p>Using multiple filters:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ozone debug ldb --db<span style="color:#f92672">=</span>/path/to/om.db scan --cf<span style="color:#f92672">=</span>volumeTable --filter<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;usedNamespace:equals:2,volume:regex:^.*4</span>$<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;/vol4&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;metadata&#34;</span>: {},
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;objectID&#34;</span>: <span style="color:#ae81ff">-888</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;updateID&#34;</span>: <span style="color:#ae81ff">5000</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;adminName&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ownerName&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;volume&#34;</span>: <span style="color:#e6db74">&#34;vol4&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;creationTime&#34;</span>: <span style="color:#ae81ff">1696280979907</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;modificationTime&#34;</span>: <span style="color:#ae81ff">1696280979907</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;quotaInBytes&#34;</span>: <span style="color:#ae81ff">2251799813685250</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;quotaInNamespace&#34;</span>: <span style="color:#ae81ff">100000000</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;usedNamespace&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;acls&#34;</span>: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;USER&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;om&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;aclScope&#34;</span>: <span style="color:#e6db74">&#34;ACCESS&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;refCount&#34;</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><h3 id="value-schema-command">value-schema command</h3>
<p><code>value-schema</code> command shows the schema of the value stored in a column-family of a rocksdb, i.e., it shows the fields stored in the value and it&rsquo;s datatype.
<code>--depth</code> can be used optionally to limit the level until which the fields are fetched.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ozone debug ldb --db<span style="color:#f92672">=</span>/data/metadata/om.db value-schema --cf<span style="color:#f92672">=</span>keyTable --depth<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;OmKeyInfo&#34;</span> : {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;bucketName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;metadata&#34;</span> : <span style="color:#e6db74">&#34;struct&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;fileName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;creationTime&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;isFile&#34;</span> : <span style="color:#e6db74">&#34;boolean&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;acls&#34;</span> : <span style="color:#e6db74">&#34;struct&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;keyName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;replicationConfig&#34;</span> : <span style="color:#e6db74">&#34;struct&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;encInfo&#34;</span> : <span style="color:#e6db74">&#34;struct&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;dataSize&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;tags&#34;</span> : <span style="color:#e6db74">&#34;struct&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;keyLocationVersions&#34;</span> : <span style="color:#e6db74">&#34;struct&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;updateID&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ownerName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;modificationTime&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;parentObjectID&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;volumeName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;fileChecksum&#34;</span> : <span style="color:#e6db74">&#34;struct&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;objectID&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ozone debug ldb --db<span style="color:#f92672">=</span>/data/metadata/om.db value-schema --cf<span style="color:#f92672">=</span>keyTable
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;OmKeyInfo&#34;</span> : {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;bucketName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;metadata&#34;</span> : { },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;fileName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;creationTime&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;isFile&#34;</span> : <span style="color:#e6db74">&#34;boolean&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;acls&#34;</span> : {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;toStringMethod&#34;</span> : { },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;hashCodeMethod&#34;</span> : { },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span> : {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;value&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;ordinal&#34;</span> : <span style="color:#e6db74">&#34;int&#34;</span>
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;aclScope&#34;</span> : {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;ordinal&#34;</span> : <span style="color:#e6db74">&#34;int&#34;</span>
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;aclBits&#34;</span> : <span style="color:#e6db74">&#34;int&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;keyName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;replicationConfig&#34;</span> : { },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;encInfo&#34;</span> : {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;ezKeyVersionName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;keyName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;edek&#34;</span> : { },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;cipherSuite&#34;</span> : {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;unknownValue&#34;</span> : {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;value&#34;</span> : <span style="color:#e6db74">&#34;int&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;algoBlockSize&#34;</span> : <span style="color:#e6db74">&#34;int&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;ordinal&#34;</span> : <span style="color:#e6db74">&#34;int&#34;</span>
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span> : {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;unknownValue&#34;</span> : {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;value&#34;</span> : <span style="color:#e6db74">&#34;int&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;description&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;version&#34;</span> : <span style="color:#e6db74">&#34;int&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;ordinal&#34;</span> : <span style="color:#e6db74">&#34;int&#34;</span>
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;iv&#34;</span> : { }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;dataSize&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;tags&#34;</span> : { },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;keyLocationVersions&#34;</span> : {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;isMultipartKey&#34;</span> : <span style="color:#e6db74">&#34;boolean&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;locationVersionMap&#34;</span> : { },
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;version&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;updateID&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ownerName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;modificationTime&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;parentObjectID&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;volumeName&#34;</span> : <span style="color:#e6db74">&#34;String&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;fileChecksum&#34;</span> : { },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;objectID&#34;</span> : <span style="color:#e6db74">&#34;long&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

          
          <a class="btn  btn-success btn-lg" href="../tools/logsinozone.html">Next >></a>
          
          </div>

        </div>
      </div>
    </div>
  </div>
    <div class="push"></div>
  </div>

  

<footer class="footer">
  <div class="container">
    <span class="small text-muted">
      Version: 2.1.0-SNAPSHOT, Last Modified: October 30, 2024 <a class="hide-child link primary-color" href="https://github.com/apache/ozone/commit/c4d68573f76c8a1528a4d07d558371dba159c37d">c4d68573f7</a>
    </span>
  </div>
</footer>



<script src="../js/jquery-3.5.1.min.js"></script>
<script src="../js/ozonedoc.js"></script>
<script src="../js/bootstrap.min.js"></script>


</body>

</html>