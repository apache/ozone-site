"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[4046],{62392:(e,t,r)=>{r.d(t,{R:()=>a,x:()=>c});var s=r(30758);const o={},n=s.createContext(o);function a(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(n.Provider,{value:t},e.children)}},73496:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"administrator-guide/configuration/security/securing-s3-secrets","title":"External S3 Secret Storage with HashiCorp Vault","description":"By default, S3 secrets are stored in the Ozone Manager\u2019s RocksDB. For enhanced security, Ozone can be configured to use HashiCorp Vault as an external secret storage backend.","source":"@site/docs/05-administrator-guide/02-configuration/03-security/05-securing-s3-secrets.md","sourceDirName":"05-administrator-guide/02-configuration/03-security","slug":"/administrator-guide/configuration/security/securing-s3-secrets","permalink":"/docs/administrator-guide/configuration/security/securing-s3-secrets","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/HDDS-9225-website-v2/docs/05-administrator-guide/02-configuration/03-security/05-securing-s3-secrets.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_label":"Securing S3 Secrets"},"sidebar":"defaultSidebar","previous":{"title":"Transparent Data Encryption (TDE)","permalink":"/docs/administrator-guide/configuration/security/encryption/transparent-data-encryption"},"next":{"title":"Performance","permalink":"/docs/administrator-guide/configuration/performance/"}}');var o=r(86070),n=r(62392);const a={sidebar_label:"Securing S3 Secrets"},c="External S3 Secret Storage with HashiCorp Vault",i={},l=[{value:"Configuration",id:"configuration",level:2},{value:"Example",id:"example",level:2},{value:"Example with SSL",id:"example-with-ssl",level:2},{value:"References",id:"references",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"external-s3-secret-storage-with-hashicorp-vault",children:"External S3 Secret Storage with HashiCorp Vault"})}),"\n",(0,o.jsx)(t.p,{children:"By default, S3 secrets are stored in the Ozone Manager\u2019s RocksDB. For enhanced security, Ozone can be configured to use HashiCorp Vault as an external secret storage backend."}),"\n",(0,o.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsxs)(t.p,{children:["To enable Vault integration, you need to configure the following properties in ",(0,o.jsx)(t.code,{children:"ozone-site.xml"}),":"]}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Property"}),(0,o.jsx)(t.th,{children:"Description"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.provider"})}),(0,o.jsxs)(t.td,{children:["The S3 secret storage provider to use. Set this to ",(0,o.jsx)(t.code,{children:"org.apache.hadoop.ozone.s3.remote.vault.VaultS3SecretStorageProvider"})," to enable Vault."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.address"})}),(0,o.jsxs)(t.td,{children:["The address of the Vault server (e.g., ",(0,o.jsx)(t.code,{children:"http://vault:8200"}),")."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.namespace"})}),(0,o.jsx)(t.td,{children:"The Vault namespace to use."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.enginever"})}),(0,o.jsxs)(t.td,{children:["The version of the Vault secrets engine (e.g., ",(0,o.jsx)(t.code,{children:"2"}),")."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.secretpath"})}),(0,o.jsx)(t.td,{children:"The path where the secrets are stored in Vault."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.auth"})}),(0,o.jsxs)(t.td,{children:["The authentication method to use with Vault. Supported values are ",(0,o.jsx)(t.code,{children:"TOKEN"})," and ",(0,o.jsx)(t.code,{children:"APPROLE"}),"."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.auth.token"})}),(0,o.jsxs)(t.td,{children:["The Vault authentication token. Required if ",(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.auth"})," is set to ",(0,o.jsx)(t.code,{children:"TOKEN"}),"."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.auth.approle.id"})}),(0,o.jsxs)(t.td,{children:["The AppRole RoleID. Required if ",(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.auth"})," is set to ",(0,o.jsx)(t.code,{children:"APPROLE"}),"."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.auth.approle.secret"})}),(0,o.jsxs)(t.td,{children:["The AppRole SecretID. Required if ",(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.auth"})," is set to ",(0,o.jsx)(t.code,{children:"APPROLE"}),"."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.auth.approle.path"})}),(0,o.jsxs)(t.td,{children:["The AppRole path. Required if ",(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.auth"})," is set to ",(0,o.jsx)(t.code,{children:"APPROLE"}),"."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.trust.store.type"})}),(0,o.jsxs)(t.td,{children:["The type of the trust store (e.g., ",(0,o.jsx)(t.code,{children:"JKS"}),")."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.trust.store.path"})}),(0,o.jsx)(t.td,{children:"The path to the trust store file."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.trust.store.password"})}),(0,o.jsx)(t.td,{children:"The password for the trust store."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.key.store.type"})}),(0,o.jsxs)(t.td,{children:["The type of the key store (e.g., ",(0,o.jsx)(t.code,{children:"JKS"}),")."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.key.store.path"})}),(0,o.jsx)(t.td,{children:"The path to the key store file."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:"ozone.secret.s3.store.remote.vault.key.store.password"})}),(0,o.jsx)(t.td,{children:"The password for the key store."})]})]})]}),"\n",(0,o.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,o.jsx)(t.p,{children:"Here is an example of how to configure Ozone to use Vault for S3 secret storage with token authentication:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-xml",children:"<property>\n  <name>ozone.secret.s3.store.provider</name>\n  <value>org.apache.hadoop.ozone.s3.remote.vault.VaultS3SecretStorageProvider</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.address</name>\n  <value>http://localhost:8200</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.enginever</name>\n  <value>2</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.secretpath</name>\n  <value>secret</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.auth</name>\n  <value>TOKEN</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.auth.token</name>\n  <value>your-vault-token</value>\n</property>\n"})}),"\n",(0,o.jsx)(t.h2,{id:"example-with-ssl",children:"Example with SSL"}),"\n",(0,o.jsx)(t.p,{children:"Here is an example of how to configure Ozone to use Vault for S3 secret storage with SSL:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-xml",children:"<property>\n  <name>ozone.secret.s3.store.provider</name>\n  <value>org.apache.hadoop.ozone.s3.remote.vault.VaultS3SecretStorageProvider</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.address</name>\n  <value>https://localhost:8200</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.enginever</name>\n  <value>2</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.secretpath</name>\n  <value>secret</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.auth</name>\n  <value>TOKEN</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.auth.token</name>\n  <value>your-vault-token</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.trust.store.path</name>\n  <value>/path/to/truststore.jks</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.trust.store.password</name>\n  <value>truststore-password</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.key.store.path</name>\n  <value>/path/to/keystore.jks</value>\n</property>\n<property>\n  <name>ozone.secret.s3.store.remote.vault.key.store.password</name>\n  <value>keystore-password</value>\n</property>\n"})}),"\n",(0,o.jsx)(t.h2,{id:"references",children:"References"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"https://developer.hashicorp.com/vault/docs",children:"HashiCorp Vault Documentation"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);