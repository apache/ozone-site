"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[54438],{39994:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"administrator-guide/operations/tools/ozone-debug/debug-replicas","title":"Debug Replicas","description":"Debug commands for retrieving information and performing various checks on the key replicas in Datanodes.","source":"@site/docs/05-administrator-guide/03-operations/11-tools/03-ozone-debug/04-debug-replicas.md","sourceDirName":"05-administrator-guide/03-operations/11-tools/03-ozone-debug","slug":"/administrator-guide/operations/tools/ozone-debug/debug-replicas","permalink":"/docs/next/administrator-guide/operations/tools/ozone-debug/debug-replicas","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/master/docs/05-administrator-guide/03-operations/11-tools/03-ozone-debug/04-debug-replicas.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"Debug Datanode","permalink":"/docs/next/administrator-guide/operations/tools/ozone-debug/debug-datanode"},"next":{"title":"Ratis Log Parser","permalink":"/docs/next/administrator-guide/operations/tools/ozone-debug/ratis-log-parser"}}');var i=o(86070),s=o(62392);const r={},a="Debug Replicas",c={},l=[{value:"chunk-info",id:"chunk-info",level:2},{value:"verify",id:"verify",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"debug-replicas",children:"Debug Replicas"})}),"\n",(0,i.jsx)(n.p,{children:"Debug commands for retrieving information and performing various checks on the key replicas in Datanodes."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"Usage: ozone debug replicas [--verbose] [COMMAND]\nDebug commands for replica-related issues, retrieving replica information from\nthe OM and performing checks over the network against a running cluster.\n      --verbose   More verbose output. Show the stack trace of the errors.\nCommands:\n  chunk-info  Returns chunk location information about an existing key\n  verify      Run checks to verify data across replicas. By default prints only\n                the keys with failed checks.\n"})}),"\n",(0,i.jsx)(n.h2,{id:"chunk-info",children:"chunk-info"}),"\n",(0,i.jsx)(n.p,{children:"For a given URI of a key, the command returns all the chunks\u2019 location information."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"Usage: ozone debug replicas chunk-info [-hV] [--verbose] <value>\nReturns chunk location information about an existing key\n      <value>     URI of the key (format: volume/bucket/key).\n                  Ozone URI could either be a full URI or short URI.\n                  Full URI should start with o3://, in case of non-HA\n                  clusters it should be followed by the host name and\n                  optionally the port number. In case of HA clusters\n                  the service id should be used. Service id provides a\n                  logical name for multiple hosts and it is defined\n                  in the property ozone.om.service.ids.\n                  Example of a full URI with host name and port number\n                  for a key:\n                  o3://omhostname:9862/vol1/bucket1/key1\n                  With a service id for a volume:\n                  o3://omserviceid/vol1/\n                  Short URI should start from the volume.\n                  Example of a short URI for a bucket:\n                  vol1/bucket1\n                  Any unspecified information will be identified from\n                  the config files.\n\n  -h, --help      Show this help message and exit.\n  -V, --version   Print version information and exit.\n      --verbose   More verbose output. Show the stack trace of the errors.\n"})}),"\n",(0,i.jsx)(n.h2,{id:"verify",children:"verify"}),"\n",(0,i.jsx)(n.p,{children:"Verify data across replicas. There are multiple checks available, which can be selected using the command line options:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"Usage: ozone debug replicas verify [-hV] [--all-results] [--verbose]\n                                   [--container-cache-size=<containerCacheSize>]\n                                   [-id=<scmServiceId>] [--scm=<scm>]\n                                   ([--checksums] [--block-existence]\n                                   [--container-state]) <uri>\nRun checks to verify data across replicas. By default prints only the keys with\nfailed checks.\n      <uri>               Ozone URI could either be a full URI or short URI.\n                          Full URI should start with o3://, in case of non-HA\n                          clusters it should be followed by the host name and\n                          optionally the port number. In case of HA clusters\n                          the service id should be used. Service id provides a\n                          logical name for multiple hosts and it is defined\n                          in the property ozone.om.service.ids.\n                          Example of a full URI with host name and port number\n                          for a key:\n                          o3://omhostname:9862/vol1/bucket1/key1\n                          With a service id for a volume:\n                          o3://omserviceid/vol1/\n                          Short URI should start from the volume.\n                          Example of a short URI for a bucket:\n                          vol1/bucket1\n                          Any unspecified information will be identified from\n                          the config files.\n\n      --all-results       Print results for all passing and failing keys\n      --block-existence   Check for block existence on datanodes.\n      --checksums         Do client side data checksum validation of all\n                            replicas.\n      --container-cache-size=<containerCacheSize>\n                          Size (in number of containers) of the in-memory cache\n                            for container state verification\n                            '--container-state'. Default is 1 million\n                            containers (which takes around 43MB). Value must be\n                            greater than zero, otherwise the default of 1\n                            million is considered. Note: This option is ignored\n                            if '--container-state' option is not used.\n      --container-state   Check the container and replica states. Containers in\n                            [DELETING, DELETED] states, or its replicas in\n                            [DELETED, UNHEALTHY, INVALID] states fail the check.\n  -h, --help              Show this help message and exit.\n      -id, --service-id=<scmServiceId>\n                          ServiceId of SCM HA Cluster\n      --scm=<scm>         The destination scm (host:port)\n  -V, --version           Print version information and exit.\n      --verbose           More verbose output. Show the stack trace of the\n                            errors.\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"/docs/administrator-guide/operations/tools/ozone-debug/ratis-log-parser",children:"Next >>"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},62392:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>a});var t=o(30758);const i={},s=t.createContext(i);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);