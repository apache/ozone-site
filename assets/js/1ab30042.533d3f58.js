"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[2354],{60802:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>l,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"administrator-guide/operations/node-decommissioning-and-maintenance/storage-container-manager","title":"Decommissioning a Storage Container Manager","description":"Storage Container Manager (SCM) decommissioning is the process in which you can gracefully remove one of the SCM from the SCM HA Ring.","source":"@site/docs/05-administrator-guide/03-operations/03-node-decommissioning-and-maintenance/02-storage-container-manager.md","sourceDirName":"05-administrator-guide/03-operations/03-node-decommissioning-and-maintenance","slug":"/administrator-guide/operations/node-decommissioning-and-maintenance/storage-container-manager","permalink":"/docs/administrator-guide/operations/node-decommissioning-and-maintenance/storage-container-manager","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/HDDS-9225-website-v2/docs/05-administrator-guide/03-operations/03-node-decommissioning-and-maintenance/02-storage-container-manager.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_label":"Storage Container Manager"},"sidebar":"defaultSidebar","previous":{"title":"Ozone Manager","permalink":"/docs/administrator-guide/operations/node-decommissioning-and-maintenance/ozone-manager"},"next":{"title":"Datanodes","permalink":"/docs/administrator-guide/operations/node-decommissioning-and-maintenance/datanodes"}}');var a=o(86070),r=o(62392);const t={sidebar_label:"Storage Container Manager"},s="Decommissioning a Storage Container Manager",d={},c=[{value:"Leader SCM",id:"leader-scm",level:2},{value:"Primordial SCM",id:"primordial-scm",level:2},{value:"Note",id:"note",level:3}];function m(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"decommissioning-a-storage-container-manager",children:"Decommissioning a Storage Container Manager"})}),"\n",(0,a.jsx)(n.p,{children:"Storage Container Manager (SCM) decommissioning is the process in which you can gracefully remove one of the SCM from the SCM HA Ring."}),"\n",(0,a.jsx)(n.p,{children:"To decommission an SCM and remove the node from the SCM HA ring, the following steps need to be executed."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"ozone admin scm decommission [-hV] [--service-id=<scmServiceId>] -nodeid=<nodeId>\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You can obtain the ",(0,a.jsx)(n.code,{children:"nodeId"})," by executing this command, ",(0,a.jsx)(n.code,{children:"ozone admin scm roles"})]}),"\n",(0,a.jsx)(n.h2,{id:"leader-scm",children:"Leader SCM"}),"\n",(0,a.jsxs)(n.p,{children:["If you want to decommission the ",(0,a.jsx)(n.strong,{children:"leader"})," SCM, you must first transfer the leadership to a different SCM and then decommission the node."]}),"\n",(0,a.jsx)(n.p,{children:"To transfer the leader, we can execute below command,"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"ozone admin scm transfer [--service-id=<scmServiceId>] -n=<nodeId>\n"})}),"\n",(0,a.jsx)(n.p,{children:"After successful leadership change you can proceed with decommissioning."}),"\n",(0,a.jsx)(n.h2,{id:"primordial-scm",children:"Primordial SCM"}),"\n",(0,a.jsxs)(n.p,{children:["If you want to decommission the ",(0,a.jsx)(n.strong,{children:"primordial"})," SCM, you have to change the ",(0,a.jsx)(n.code,{children:"ozone.scm.primordial.node.id"})," property to point to a different SCM and then proceed with decommissioning."]}),"\n",(0,a.jsx)(n.h3,{id:"note",children:"Note"}),"\n",(0,a.jsxs)(n.p,{children:["During SCM decommissioning the private key of the decommissioned SCM should be manually deleted. The private keys can be found inside ",(0,a.jsx)(n.code,{children:"hdds.metadata.dir"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"Manual deletion is needed until we have certificate revocation support (HDDS-8399)"})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},62392:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>s});var i=o(30758);const a={},r=i.createContext(a);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);