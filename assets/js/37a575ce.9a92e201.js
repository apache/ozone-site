"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[1339],{62392:(e,o,n)=>{n.d(o,{R:()=>t,x:()=>s});var i=n(30758);const a={},r=i.createContext(a);function t(e){const o=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function s(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),i.createElement(r.Provider,{value:o},e.children)}},73121:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>l,contentTitle:()=>s,default:()=>g,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"administrator-guide/configuration/logging/application-logs","title":"Configuring Application Logs","description":"Service Logs","source":"@site/docs/05-administrator-guide/02-configuration/02-logging/01-application-logs.md","sourceDirName":"05-administrator-guide/02-configuration/02-logging","slug":"/administrator-guide/configuration/logging/application-logs","permalink":"/docs/administrator-guide/configuration/logging/application-logs","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/HDDS-9225-website-v2/docs/05-administrator-guide/02-configuration/02-logging/01-application-logs.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Application Logs"},"sidebar":"defaultSidebar","previous":{"title":"Logging","permalink":"/docs/administrator-guide/configuration/logging/"},"next":{"title":"Audit Logs","permalink":"/docs/administrator-guide/configuration/logging/audit-logs"}}');var a=n(86070),r=n(62392);const t={sidebar_label:"Application Logs"},s="Configuring Application Logs",l={},d=[{value:"Service Logs",id:"service-logs",level:2},{value:"Datanode Container Logs",id:"datanode-container-logs",level:2},{value:"Example",id:"example",level:3},{value:"Debugging",id:"debugging",level:2},{value:"Enabling Debug Logs for Services",id:"enabling-debug-logs-for-services",level:3},{value:"Enabling Debug Logs for CLI Tools",id:"enabling-debug-logs-for-cli-tools",level:3}];function c(e){const o={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.header,{children:(0,a.jsx)(o.h1,{id:"configuring-application-logs",children:"Configuring Application Logs"})}),"\n",(0,a.jsx)(o.h2,{id:"service-logs",children:"Service Logs"}),"\n",(0,a.jsx)(o.p,{children:"Each Ozone service (Ozone Manager, Storage Container Manager, Datanode, S3 Gateway, and Recon) generates its own log file. These logs contain detailed information about the service\u2019s operations, including errors and warnings."}),"\n",(0,a.jsxs)(o.p,{children:["By default, log files are stored in the ",(0,a.jsx)(o.code,{children:"$OZONE_LOG_DIR"})," directory, which is usually set to the ",(0,a.jsx)(o.code,{children:"logs"})," directory under the Ozone installation. The log file names are specific to each service, for example:"]}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.code,{children:"ozone-om-....log"})," for Ozone Manager"]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.code,{children:"ozone-scm-....log"})," for Storage Container Manager"]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.code,{children:"ozone-datanode-....log"})," for Datanode"]}),"\n"]}),"\n",(0,a.jsxs)(o.p,{children:["The logging behavior for each service is controlled by its ",(0,a.jsx)(o.code,{children:"log4j.properties"})," file, located in the service\u2019s ",(0,a.jsx)(o.code,{children:"$OZONE_CONF_DIR"})," directory, usually ",(0,a.jsx)(o.code,{children:"etc/hadoop"}),". You can modify this file to change the log level, logging outputs, and other logging parameters."]}),"\n",(0,a.jsx)(o.h2,{id:"datanode-container-logs",children:"Datanode Container Logs"}),"\n",(0,a.jsx)(o.p,{children:"In addition to the main service log, Datanode also generates container-specific logs that track container replica-level events. These logs record brief messages about container state changes (open, closing, closed, unhealthy), replication events, reconstruction, reconciliation, container moves, and other container lifecycle events."}),"\n",(0,a.jsxs)(o.p,{children:["Container logs are configured via ",(0,a.jsx)(o.code,{children:"dn-container-log4j2.properties"})," and are stored as ",(0,a.jsx)(o.code,{children:"dn-container-${hostName}.log"})," in the ",(0,a.jsx)(o.code,{children:"$OZONE_LOG_DIR"})," directory."]}),"\n",(0,a.jsx)(o.h3,{id:"example",children:"Example"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-text",children:"2026-02-01 16:08:59,261 | INFO  | ID=2 | Index=0 | BCSID=0 | State=OPEN | Volume=/hadoop-ozone/datanode/data/hdds | DataChecksum=0 |\n2026-02-03 12:49:36,139 | INFO  | ID=2 | Index=0 | BCSID=1172 | State=CLOSING | Volume=/hadoop-ozone/datanode/data/hdds | DataChecksum=0 |\n2026-02-03 12:49:37,443 | INFO  | ID=2 | Index=0 | BCSID=1172 | State=CLOSED | Volume=/hadoop-ozone/datanode/data/hdds | DataChecksum=4117a7a2 |\n2026-02-03 13:31:17,149 | INFO  | ID=2018 | Index=0 | BCSID=159 | State=CLOSING | Volume=/mnt/dummy_disk1/hadoop-ozone/datanode/data/hdds | DataChecksum=0 |\n2026-02-03 13:31:17,205 | WARN  | ID=2018 | Index=0 | BCSID=159 | State=QUASI_CLOSED | Volume=/mnt/dummy_disk1/hadoop-ozone/datanode/data/hdds | DataChecksum=2a21d155 | Ratis group removed. Group id: group-82AA09A3DA8C |\n"})}),"\n",(0,a.jsx)(o.h2,{id:"debugging",children:"Debugging"}),"\n",(0,a.jsx)(o.p,{children:"You can increase the log verbosity for debugging purposes for both services and CLI tools."}),"\n",(0,a.jsx)(o.h3,{id:"enabling-debug-logs-for-services",children:"Enabling Debug Logs for Services"}),"\n",(0,a.jsxs)(o.p,{children:["To enable debug logging for a service, you need to modify its ",(0,a.jsx)(o.code,{children:"log4j.properties"})," file. Change the log level for the desired logger from ",(0,a.jsx)(o.code,{children:"INFO"})," to ",(0,a.jsx)(o.code,{children:"DEBUG"}),". For example, to enable debug logging for the Ozone Manager, you would edit its ",(0,a.jsx)(o.code,{children:"log4j.properties"})," and change the following line:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-properties",children:"rootLogger.level = info\n"})}),"\n",(0,a.jsx)(o.p,{children:"to"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-properties",children:"rootLogger.level = debug\n"})}),"\n",(0,a.jsx)(o.p,{children:"After saving the file and restarting the service, the service will start logging more detailed debug information."}),"\n",(0,a.jsx)(o.h3,{id:"enabling-debug-logs-for-cli-tools",children:"Enabling Debug Logs for CLI Tools"}),"\n",(0,a.jsxs)(o.p,{children:["To enable debug logging for Ozone CLI tools (e.g., ",(0,a.jsx)(o.code,{children:"ozone sh volume create"}),"), you can set the ",(0,a.jsx)(o.code,{children:"OZONE_ROOT_LOGGER"})," environment variable to ",(0,a.jsx)(o.code,{children:"debug"}),":"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"export OZONE_ROOT_LOGGER=DEBUG,console\nozone sh volume create /vol1\n"})}),"\n",(0,a.jsx)(o.p,{children:"Alternatively, you can use the --loglevel option with the Ozone command:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"ozone --loglevel debug sh volume create /vol1\n"})})]})}function g(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);