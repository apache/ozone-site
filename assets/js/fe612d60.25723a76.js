"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[2775],{11350:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"core-concepts/replication/storage-containers","title":"storage-containers","description":"\x3c!---","source":"@site/docs/03-core-concepts/02-replication/01-storage-containers.md","sourceDirName":"03-core-concepts/02-replication","slug":"/core-concepts/replication/storage-containers","permalink":"/docs/core-concepts/replication/storage-containers","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/HDDS-9225-website-v2/docs/03-core-concepts/02-replication/01-storage-containers.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"Replication","permalink":"/docs/core-concepts/replication/"},"next":{"title":"Write Pipelines","permalink":"/docs/core-concepts/replication/write-pipelines"}}');var i=t(86070),s=t(62392);const r={},a="Storage Containers",c={},d=[{value:"Open vs. Closed containers",id:"open-vs-closed-containers",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"storage-containers",children:"Storage Containers"})}),"\n",(0,i.jsx)(n.p,{children:"Storage Containers, or Containers (not to be confused with Docker containers) are the fundamental replication unit of Ozone, they are managed by the Storage Container Manager (SCM) service."}),"\n",(0,i.jsx)(n.p,{children:"Containers are big binary units (5GB by default) which can contain multiple blocks:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Containers",src:t(62494).A+"",width:"560",height:"366"})}),"\n",(0,i.jsxs)(n.p,{children:["Blocks are local information and not managed by SCM. Therefore even if billions of small files are created in the system (which means billions of blocks are created), only of the status of the containers will be reported by the Datanodes and containers will be replicated.\nWhen Ozone Manager requests a new Block allocation from the SCM, SCM will identify the suitable container and generate a block id which contains ",(0,i.jsx)(n.code,{children:"ContainerId"})," + ",(0,i.jsx)(n.code,{children:"LocalId"}),". Client will connect to the Datanode which stores the Container, and Datanode can manage the separated block based on the ",(0,i.jsx)(n.code,{children:"LocalId"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"open-vs-closed-containers",children:"Open vs. Closed containers"}),"\n",(0,i.jsx)(n.p,{children:"When a container is created it starts in an OPEN state. When it's full (~5GB data is written), container will be closed and becomes a CLOSED container."}),"\n",(0,i.jsx)(n.p,{children:"The fundamental differences between OPEN and CLOSED containers:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"OPEN"}),(0,i.jsx)(n.th,{children:"CLOSED"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"mutable"}),(0,i.jsx)(n.td,{children:"immutable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"replicated with RAFT (Ratis)"}),(0,i.jsx)(n.td,{children:"Replicated with async container copy"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Raft leader is used to READ / WRITE"}),(0,i.jsx)(n.td,{children:"All the nodes can be used to READ"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},62392:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(30758);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}},62494:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/Containers-af815cd35045a100eb9c3534adb31766.png"}}]);