"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[6688],{210:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"administrator-guide/configuration/performance/fair-call-queue","title":"FairCallQueue","description":"This document contains information for setting up the FairCallQueue feature with Ozone.","source":"@site/docs/05-administrator-guide/02-configuration/04-performance/08-fair-call-queue.md","sourceDirName":"05-administrator-guide/02-configuration/04-performance","slug":"/administrator-guide/configuration/performance/fair-call-queue","permalink":"/docs/administrator-guide/configuration/performance/fair-call-queue","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/HDDS-9225-website-v2/docs/05-administrator-guide/02-configuration/04-performance/08-fair-call-queue.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_label":"FairCallQueue"},"sidebar":"defaultSidebar","previous":{"title":"S3 Gateway Load Balancing","permalink":"/docs/administrator-guide/configuration/performance/s3-gateway-load-balancing"},"next":{"title":"Appendix","permalink":"/docs/administrator-guide/configuration/appendix"}}');var o=r(86070),i=r(62392);const t={sidebar_label:"FairCallQueue"},l="FairCallQueue",c={},u=[{value:"Configuration",id:"configuration",level:2}];function s(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"faircallqueue",children:"FairCallQueue"})}),"\n",(0,o.jsxs)(n.p,{children:["This document contains information for setting up the ",(0,o.jsx)(n.code,{children:"FairCallQueue"})," feature with Ozone.\nIn order for ",(0,o.jsx)(n.code,{children:"FairCallQueue"})," to be enabled and used,\nHadoop RPC must be used as transport protocol for OM - S3G communication.\nThere is no implementation for gRPC yet."]}),"\n",(0,o.jsxs)(n.p,{children:["There is a custom ",(0,o.jsx)(n.code,{children:"IdentityProvider"})," implementation for Ozone that must be specified in the configuration, otherwise\nthere is no S3G impersonation which makes the ",(0,o.jsx)(n.code,{children:"FairCallQueue"})," ineffective since it's only reading one user,\nthe S3G special user instead of the S3G client user."]}),"\n",(0,o.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["There must be a port specified to which the OM will forward any activity\nand the ",(0,o.jsx)(n.code,{children:"FairCallQueue"})," and ",(0,o.jsx)(n.code,{children:"DecayRpcScheduler"})," will listen to.\nFurthermore, this port will have to be part of every configuration name."]}),"\n",(0,o.jsx)(n.p,{children:"Port used for below examples : 9862"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"<property>\n   <name>ozone.om.address</name>\n   <value>OMDomain:9862</value>\n</property>\n\n<property>\n    <name>ozone.om.s3.grpc.server_enabled</name>\n    <value>false</value>\n</property>\n\n<property>\n    <name>ozone.om.transport.class</name>\n    <value>org.apache.hadoop.ozone.om.protocolPB.Hadoop3OmTransportFactory</value>\n</property>\n\n<property>\n   <name>ipc.9862.callqueue.impl</name>\n   <value>org.apache.hadoop.ipc_.FairCallQueue</value>\n</property>\n\n<property>\n   <name>ipc.9862.scheduler.impl</name>\n   <value>org.apache.hadoop.ipc_.DecayRpcScheduler</value>\n</property>\n\n<property>\n   <name>ipc.9862.identity-provider.impl</name>\n   <value>org.apache.hadoop.ozone.om.helpers.OzoneIdentityProvider</value>\n</property>\n\n<property>\n   <name>ipc.9862.scheduler.priority.levels</name>\n   <value>2</value>\n</property>\n\n<property>\n   <name>ipc.9862.backoff.enable</name>\n   <value>true</value>\n</property>\n\n<property>\n   <name>ipc.9862.faircallqueue.multiplexer.weights</name>\n   <value>2,1</value>\n</property>\n\n<property>\n    <name>ipc.9862.decay-scheduler.thresholds</name>\n    <value>50</value>\n</property>\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(s,{...e})}):s(e)}},62392:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var a=r(30758);const o={},i=a.createContext(o);function t(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);