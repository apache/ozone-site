"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[3273],{48355:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"administrator-guide/operations/start-and-stop","title":"Starting and Stopping the Ozone Cluster","description":"This guide describes how to start and stop an Ozone cluster, assuming it has already been configured and initialized.","source":"@site/docs/05-administrator-guide/03-operations/01-start-and-stop.md","sourceDirName":"05-administrator-guide/03-operations","slug":"/administrator-guide/operations/start-and-stop","permalink":"/docs/administrator-guide/operations/start-and-stop","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/HDDS-9225-website-v2/docs/05-administrator-guide/03-operations/01-start-and-stop.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Start and Stop"},"sidebar":"defaultSidebar","previous":{"title":"Operations","permalink":"/docs/administrator-guide/operations/"},"next":{"title":"Upgrade and Downgrade","permalink":"/docs/administrator-guide/operations/upgrade-and-downgrade"}}');var o=t(86070),a=t(62392);const r={sidebar_label:"Start and Stop"},i="Starting and Stopping the Ozone Cluster",d={},l=[{value:"Startup the cluster",id:"startup-the-cluster",level:2},{value:"Starting Optional Services",id:"starting-optional-services",level:3},{value:"Shortcut",id:"shortcut",level:2},{value:"Stopping the Cluster",id:"stopping-the-cluster",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"starting-and-stopping-the-ozone-cluster",children:"Starting and Stopping the Ozone Cluster"})}),"\n",(0,o.jsx)(n.p,{children:"This guide describes how to start and stop an Ozone cluster, assuming it has already been configured and initialized."}),"\n",(0,o.jsx)(n.h2,{id:"startup-the-cluster",children:"Startup the cluster"}),"\n",(0,o.jsx)(n.p,{children:"Run the following command on each SCM host:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ozone --daemon start scm\n"})}),"\n",(0,o.jsx)(n.p,{children:"Run the following command on each OM host:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ozone --daemon start om\n"})}),"\n",(0,o.jsx)(n.p,{children:"At this point Ozone's name services, the Ozone Manager, and the block service SCM are both running."}),"\n",(0,o.jsx)(n.p,{children:"Now we need to start the Datanodes. Please run the following command on each Datanode."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ozone --daemon start datanode\n"})}),"\n",(0,o.jsx)(n.p,{children:"Wait until SCM exits safe mode"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ozone admin safemode wait -t 240\n"})}),"\n",(0,o.jsx)(n.p,{children:"At this point SCM, Ozone Manager and Datanodes are up and running and are ready to serve requests."}),"\n",(0,o.jsx)(n.h3,{id:"starting-optional-services",children:"Starting Optional Services"}),"\n",(0,o.jsx)(n.p,{children:"If you need to start optional services like the Recon server, S3 Gateway, or HttpFS Gateway, you can start them separately:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ozone --daemon start recon\nozone --daemon start s3g\nozone --daemon start httpfs\n"})}),"\n",(0,o.jsx)(n.h2,{id:"shortcut",children:"Shortcut"}),"\n",(0,o.jsx)(n.p,{children:"If you want to make your life simpler, you can just run:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"start-ozone.sh\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This assumes that you have set up the ",(0,o.jsx)(n.code,{children:"workers"})," file correctly and ssh configuration that allows ssh-ing to all Datanodes."]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["You are expected to list all hostnames or IP addresses in your ",(0,o.jsx)(n.code,{children:"${OZONE_CONF_DIR}/workers"})," file, one per line."]}),"\n",(0,o.jsx)(n.li,{children:"You have passwordless SSH access configured from the control node to all other nodes in the cluster."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"stopping-the-cluster",children:"Stopping the Cluster"}),"\n",(0,o.jsxs)(n.p,{children:["To stop all core services, you can use the ",(0,o.jsx)(n.code,{children:"stop-ozone.sh"})," script from your SCM or OM node:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"stop-ozone.sh\n"})}),"\n",(0,o.jsx)(n.p,{children:"To stop services individually, you can run the following commands on their respective nodes:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ozone --daemon stop scm\nozone --daemon stop om\nozone --daemon stop datanode\n"})}),"\n",(0,o.jsx)(n.p,{children:"To stop optional services, run the following commands on their respective nodes:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ozone --daemon stop recon\nozone --daemon stop s3g\nozone --daemon stop httpfs\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},62392:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var s=t(30758);const o={},a=s.createContext(o);function r(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);