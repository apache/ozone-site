"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[98538],{13782:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"core-concepts/high-availability/om-ha","title":"Ozone Manager High Availability","description":"Ozone has two metadata-manager nodes (Ozone Manager for key space management and Storage Container Manager for block space management) and multiple storage nodes (Datanode). Data is replicated between Datanodes with the help of RAFT consensus algorithm.","source":"@site/versioned_docs/version-2.1.0/03-core-concepts/05-high-availability/02-om-ha.md","sourceDirName":"03-core-concepts/05-high-availability","slug":"/core-concepts/high-availability/om-ha","permalink":"/docs/core-concepts/high-availability/om-ha","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/master/versioned_docs/version-2.1.0/03-core-concepts/05-high-availability/02-om-ha.md","tags":[],"version":"2.1.0","sidebarPosition":2,"frontMatter":{"sidebar_label":"Ozone Manager High Availability"},"sidebar":"defaultSidebar","previous":{"title":"SCM High Availability","permalink":"/docs/core-concepts/high-availability/scm-ha"},"next":{"title":"Comparison with Other Storage Technologies","permalink":"/docs/core-concepts/comparison"}}');var i=n(86070),o=n(62392);const s={sidebar_label:"Ozone Manager High Availability"},r="Ozone Manager High Availability",l={},h=[{value:"How It Works",id:"how-it-works",level:2},{value:"Learn More",id:"learn-more",level:2}];function c(e){const a={a:"a",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"ozone-manager-high-availability",children:"Ozone Manager High Availability"})}),"\n",(0,i.jsxs)(a.p,{children:["Ozone has two metadata-manager nodes (",(0,i.jsx)(a.em,{children:"Ozone Manager"})," for key space management and ",(0,i.jsx)(a.em,{children:"Storage Container Manager"})," for block space management) and multiple storage nodes (Datanode). Data is replicated between Datanodes with the help of RAFT consensus algorithm."]}),"\n",(0,i.jsx)(a.p,{children:"To avoid any single point of failure the metadata-manager nodes also should have a HA setup."}),"\n",(0,i.jsx)(a.p,{children:"Both Ozone Manager and Storage Container Manager supports HA. In this mode the internal state is replicated via RAFT (with Apache Ratis)."}),"\n",(0,i.jsxs)(a.p,{children:["This page explains the HA setup of Ozone Manager (OM). Please check the ",(0,i.jsx)(a.a,{href:"./scm-ha",children:"SCM High Availability"})," page for SCM HA. While they can be setup for HA independently, a reliable, full HA setup requires enabling HA for both services."]}),"\n",(0,i.jsx)(a.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsxs)(a.p,{children:["A single Ozone Manager uses ",(0,i.jsx)(a.a,{href:"https://github.com/facebook/rocksdb/",children:"RocksDB"})," to persist metadata (volumes, buckets, keys) locally. HA version of Ozone Manager does exactly the same but all the data is replicated with the help of the RAFT consensus algorithm to follower Ozone Manager instances."]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"HA OM",src:n(44596).A+"",width:"643",height:"256"})}),"\n",(0,i.jsx)(a.p,{children:"Client connects to the Leader Ozone Manager which processes the request and schedules the replication with RAFT. When the request is replicated to all the followers the leader can return with the response."}),"\n",(0,i.jsx)(a.h2,{id:"learn-more",children:"Learn More"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Configuration"}),": For detailed configuration instructions on setting up OM HA, see the ",(0,i.jsx)(a.a,{href:"../../administrator-guide/configuration/high-availability/om-ha",children:"OM HA Configuration"})," documentation."]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Implementation Details"}),": For in-depth technical details about the OM HA implementation, including the double buffer approach and automatic snapshot installation, see the ",(0,i.jsx)(a.a,{href:"../../system-internals/components/ozone-manager/high-availability",children:"OM HA Implementation Details"})," documentation."]}),"\n"]})]})}function d(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},44596:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/HA-OM-30dfa9edace3c770b0294a885d9b5207.png"},62392:(e,a,n)=>{n.d(a,{R:()=>s,x:()=>r});var t=n(30758);const i={},o=t.createContext(i);function s(e){const a=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:a},e.children)}}}]);