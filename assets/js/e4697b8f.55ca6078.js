"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[3082],{55223:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"administrator-guide/operations/observability/prometheus","title":"Tracking Metrics With Prometheus","description":"Ozone has native support for Prometheus integration. All internal metrics (collected by Hadoop metrics framework) are published under the /prom HTTP endpoint. (For example under http9876/prom for SCM).","source":"@site/docs/05-administrator-guide/03-operations/09-observability/04-prometheus.md","sourceDirName":"05-administrator-guide/03-operations/09-observability","slug":"/administrator-guide/operations/observability/prometheus","permalink":"/docs/administrator-guide/operations/observability/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/HDDS-9225-website-v2/docs/05-administrator-guide/03-operations/09-observability/04-prometheus.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_label":"Prometheus"},"sidebar":"defaultSidebar","previous":{"title":"Web UIs","permalink":"/docs/administrator-guide/operations/observability/web-uis"},"next":{"title":"Grafana","permalink":"/docs/administrator-guide/operations/observability/grafana"}}');var o=r(86070),i=r(62392);const s={sidebar_label:"Prometheus"},a="Tracking Metrics With Prometheus",c={},d=[];function p(e){const t={a:"a",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"tracking-metrics-with-prometheus",children:"Tracking Metrics With Prometheus"})}),"\n",(0,o.jsxs)(t.p,{children:["Ozone has native support for Prometheus integration. All internal metrics (collected by Hadoop metrics framework) are published under the ",(0,o.jsx)(t.code,{children:"/prom"})," HTTP endpoint. (For example under ",(0,o.jsx)(t.a,{href:"http://localhost:9876/prom",children:"http://localhost:9876/prom"})," for SCM)."]}),"\n",(0,o.jsxs)(t.p,{children:["The Prometheus endpoint is turned on by default but can be turned off by the ",(0,o.jsx)(t.code,{children:"hdds.prometheus.endpoint.enabled"})," configuration variable."]}),"\n",(0,o.jsx)(t.p,{children:"In a secure environment the page is guarded with SPNEGO authentication which is not supported by Prometheus. To enable monitoring in a secure environment, a specific authentication token can be configured"}),"\n",(0,o.jsxs)(t.p,{children:["Example ",(0,o.jsx)(t.code,{children:"ozone-site.xml"}),":"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-XML",children:"<property>\n   <name>hdds.prometheus.endpoint.token</name>\n   <value>putyourtokenhere</value>\n</property>\n"})}),"\n",(0,o.jsx)(t.p,{children:"Example prometheus configuration:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-YAML",children:'scrape_configs:\n  - job_name: ozone\n    bearer_token: <putyourtokenhere>\n    metrics_path: /prom\n    static_configs:\n     - targets:\n         - "127.0.0.1:9876"\n'})})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},62392:(e,t,r)=>{r.d(t,{R:()=>s,x:()=>a});var n=r(30758);const o={},i=n.createContext(o);function s(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);