"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[8753],{62392:(e,a,o)=>{o.d(a,{R:()=>l,x:()=>u});var n=o(30758);const t={},s=n.createContext(t);function l(e){const a=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function u(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(s.Provider,{value:a},e.children)}},65379:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>c,contentTitle:()=>u,default:()=>d,frontMatter:()=>l,metadata:()=>n,toc:()=>i});const n=JSON.parse('{"id":"administrator-guide/operations/quota","title":"Quota in Ozone","description":"Client usage","source":"@site/docs/05-administrator-guide/03-operations/11-quota.md","sourceDirName":"05-administrator-guide/03-operations","slug":"/administrator-guide/operations/quota","permalink":"/docs/administrator-guide/operations/quota","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/HDDS-9225-website-v2/docs/05-administrator-guide/03-operations/11-quota.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_label":"Quota in Ozone"},"sidebar":"defaultSidebar","previous":{"title":"Storage Container Manager","permalink":"/docs/administrator-guide/operations/leader-transfer/storage-container-manager"},"next":{"title":"S3 Gateway Load Balancing","permalink":"/docs/administrator-guide/operations/s3-gateway-load-balancing"}}');var t=o(86070),s=o(62392);const l={sidebar_label:"Quota in Ozone"},u="Quota in Ozone",c={},i=[{value:"Client usage",id:"client-usage",level:2},{value:"Storage Space level quota",id:"storage-space-level-quota",level:3},{value:"Note",id:"note",level:4},{value:"Volume Storage Space level quota",id:"volume-storage-space-level-quota",level:4},{value:"Bucket Storage Space level quota",id:"bucket-storage-space-level-quota",level:4},{value:"Clear the quota for volume and bucket",id:"clear-the-quota-for-volume-and-bucket",level:4},{value:"Check quota and usedBytes for volume and bucket",id:"check-quota-and-usedbytes-for-volume-and-bucket",level:4},{value:"Namespace quota",id:"namespace-quota",level:3},{value:"Volume Namespace quota",id:"volume-namespace-quota",level:4},{value:"Bucket Namespace quota",id:"bucket-namespace-quota",level:4},{value:"Clear the quota for volume and bucket",id:"clear-the-quota-for-volume-and-bucket-1",level:4},{value:"Check quota and usedNamespace for volume and bucket",id:"check-quota-and-usednamespace-for-volume-and-bucket",level:4}];function r(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"quota-in-ozone",children:"Quota in Ozone"})}),"\n",(0,t.jsx)(a.h2,{id:"client-usage",children:"Client usage"}),"\n",(0,t.jsx)(a.h3,{id:"storage-space-level-quota",children:"Storage Space level quota"}),"\n",(0,t.jsx)(a.p,{children:"Storage space level quotas allow the use of units B, KB, MB, GB and TB. Represents how much storage Spaces will be used."}),"\n",(0,t.jsx)(a.h4,{id:"note",children:"Note"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsx)(a.p,{children:"Decimals are not supported while setting quota for volume and bucket. For example, 1.5 TB."}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsx)(a.p,{children:"Ensure that the minimum storage quota is default block size x replication factor. If you set the value lesser than the default block size x replication factor, while writing the data (key put) operation, an operation error is displayed."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(a.h4,{id:"volume-storage-space-level-quota",children:"Volume Storage Space level quota"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh volume create --space-quota 5MB /volume1\n"})}),"\n",(0,t.jsx)(a.p,{children:"This means setting the storage space of Volume1 to 5MB"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh volume setquota --space-quota 10GB /volume1\n"})}),"\n",(0,t.jsx)(a.p,{children:"This behavior changes the quota of Volume1 to 10GB."}),"\n",(0,t.jsx)(a.h4,{id:"bucket-storage-space-level-quota",children:"Bucket Storage Space level quota"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh bucket create --space-quota 5MB /volume1/bucket1\n"})}),"\n",(0,t.jsx)(a.p,{children:"That means bucket1 allows us to use 5MB of storage."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh bucket setquota  --space-quota 10GB /volume1/bucket1 \n"})}),"\n",(0,t.jsx)(a.p,{children:"This behavior changes the quota for Bucket1 to 10GB"}),"\n",(0,t.jsx)(a.p,{children:"Total bucket quota should not be greater than its Volume quota. If we have a 10MB Volume, The sum of the sizes of all buckets under this volume cannot exceed 10MB, otherwise the bucket set quota fails."}),"\n",(0,t.jsx)(a.h4,{id:"clear-the-quota-for-volume-and-bucket",children:"Clear the quota for volume and bucket"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh volume clrquota --space-quota /volume1\nbin/ozone sh bucket clrquota --space-quota /volume1/bucket1\n"})}),"\n",(0,t.jsx)(a.h4,{id:"check-quota-and-usedbytes-for-volume-and-bucket",children:"Check quota and usedBytes for volume and bucket"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh volume info /volume1\nbin/ozone sh bucket info /volume1/bucket1\n"})}),"\n",(0,t.jsx)(a.p,{children:"We can get the quota value and usedBytes in the info of volume and bucket."}),"\n",(0,t.jsx)(a.h3,{id:"namespace-quota",children:"Namespace quota"}),"\n",(0,t.jsx)(a.p,{children:"Namespace quota is a number that represents how many unique names can be used. This number cannot be greater than LONG.MAX_VALUE in Java."}),"\n",(0,t.jsx)(a.h4,{id:"volume-namespace-quota",children:"Volume Namespace quota"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh volume create --namespace-quota 100 /volume1\n"})}),"\n",(0,t.jsx)(a.p,{children:"This means setting the namespace quota of Volume1 to 100."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh volume setquota --namespace-quota 1000 /volume1\n"})}),"\n",(0,t.jsx)(a.p,{children:"This behavior changes the namespace quota of Volume1 to 1000."}),"\n",(0,t.jsx)(a.h4,{id:"bucket-namespace-quota",children:"Bucket Namespace quota"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh bucket create --namespace-quota 100 /volume1/bucket1\n"})}),"\n",(0,t.jsx)(a.p,{children:"That means bucket1 allows us to use 100 of namespace."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh bucket setquota --namespace-quota 1000 /volume1/bucket1 \n"})}),"\n",(0,t.jsx)(a.p,{children:"This behavior changes the quota for Bucket1 to 1000."}),"\n",(0,t.jsx)(a.h4,{id:"clear-the-quota-for-volume-and-bucket-1",children:"Clear the quota for volume and bucket"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh volume clrquota --namespace-quota /volume1\nbin/ozone sh bucket clrquota --namespace-quota /volume1/bucket1\n"})}),"\n",(0,t.jsx)(a.h4,{id:"check-quota-and-usednamespace-for-volume-and-bucket",children:"Check quota and usedNamespace for volume and bucket"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-shell",children:"bin/ozone sh volume info /volume1\nbin/ozone sh bucket info /volume1/bucket1\n"})}),"\n",(0,t.jsx)(a.p,{children:"We can get the quota value and usedNamespace in the info of volume and bucket."})]})}function d(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}}}]);