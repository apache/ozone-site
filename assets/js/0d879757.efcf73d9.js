"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[32104],{8243:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"quick-start/installation/bare-metal","title":"Try Ozone on Bare Metal","description":"This guide covers setting up Apache Ozone on physical or virtual machines. Choose between manual installation or automated deployment using the Ozone Installer tool.","source":"@site/docs/02-quick-start/01-installation/03-bare-metal.md","sourceDirName":"02-quick-start/01-installation","slug":"/quick-start/installation/bare-metal","permalink":"/docs/next/quick-start/installation/bare-metal","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/master/docs/02-quick-start/01-installation/03-bare-metal.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"Bare Metal"},"sidebar":"defaultSidebar","previous":{"title":"Kubernetes","permalink":"/docs/next/quick-start/installation/kubernetes"},"next":{"title":"Reading and Writing Data in Ozone","permalink":"/docs/next/quick-start/reading-writing-data"}}');var s=o(86070),a=o(62392);const i={sidebar_label:"Bare Metal"},l="Try Ozone on Bare Metal",r={},d=[{value:"Ozone Components",id:"ozone-components",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Method 1: Manual Installation",id:"method-1-manual-installation",level:2},{value:"Step 1: Install Java",id:"step-1-install-java",level:3},{value:"Step 2: Create Service User",id:"step-2-create-service-user",level:3},{value:"Step 3: Download and Extract Ozone",id:"step-3-download-and-extract-ozone",level:3},{value:"Step 4: Generate and Configure",id:"step-4-generate-and-configure",level:3},{value:"Step 5: Initialize Services",id:"step-5-initialize-services",level:3},{value:"Step 6: Start Services",id:"step-6-start-services",level:3},{value:"Step 7: Verify Installation",id:"step-7-verify-installation",level:3},{value:"Stop Services (when needed)",id:"stop-services-when-needed",level:3},{value:"Method 2: Automated Installation (Recommended)",id:"method-2-automated-installation-recommended",level:2},{value:"Installation Steps",id:"installation-steps",level:3},{value:"What Gets Installed",id:"what-gets-installed",level:3},{value:"References",id:"references",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"try-ozone-on-bare-metal",children:"Try Ozone on Bare Metal"})}),"\n",(0,s.jsx)(n.p,{children:"This guide covers setting up Apache Ozone on physical or virtual machines. Choose between manual installation or automated deployment using the Ozone Installer tool."}),"\n",(0,s.jsx)(n.h2,{id:"ozone-components",children:"Ozone Components"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ozone Manager (OM)"})," - Manages the namespace (volumes, buckets, keys)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Storage Container Manager (SCM)"})," - Block manager that provides blocks for data writes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Datanodes (DN)"})," - Store containers and handle data read/write operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Recon"})," (Optional) - Management and monitoring interface"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"S3 Gateway (S3G)"})," (Optional) - Provides S3-compatible API access to Ozone"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Learn more: ",(0,s.jsx)(n.a,{href:"https://ozone.apache.org/docs/edge/concept/overview.html",children:"Ozone Architecture Overview"})]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"All Nodes:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Linux OS (RHEL/CentOS 7+, Ubuntu 20.04+)"}),"\n",(0,s.jsx)(n.li,{children:"Java 11 or Java 17 (OpenJDK)"}),"\n",(0,s.jsx)(n.li,{children:"Minimum 4 GB RAM"}),"\n",(0,s.jsx)(n.li,{children:"SSH access"}),"\n",(0,s.jsx)(n.li,{children:"Network connectivity between nodes"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"For Manual Installation:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Root/sudo access on all nodes"}),"\n",(0,s.jsx)(n.li,{children:"wget or curl for downloading binaries"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"For Automated Installation:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Controller node:"})," Python 3.10-3.12, Ansible Community 10.x"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Managed nodes:"})," Python 3.7+, sudo access"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"method-1-manual-installation",children:"Method 1: Manual Installation"}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["We will be using ",(0,s.jsx)(n.code,{children:"/opt/ozone"})," as the base directory for Ozone configs and binaries, and ",(0,s.jsx)(n.code,{children:"/data/ozone"})," for the application data and metadata in all of our examples. Feel free to use any path as per your environment."]})}),"\n",(0,s.jsx)(n.h3,{id:"step-1-install-java",children:"Step 1: Install Java"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"jdk_version=11  # or 17\n# RHEL/CentOS/Rocky Linux\nsudo yum install -y java-${jdk_version}-openjdk-devel\n\n# Ubuntu/Debian\nsudo apt-get update\nsudo apt-get install -y openjdk-${jdk_version}-jdk\n\n# Verify installation\njava -version\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Set ",(0,s.jsx)(n.code,{children:"JAVA_HOME"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Find Java location\nsudo update-alternatives --config java\n\n# Add to ~/.bashrc or /etc/profile\nexport JAVA_HOME=/usr/lib/jvm/java-11-openjdk\nexport PATH=$PATH:$JAVA_HOME/bin\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-2-create-service-user",children:"Step 2: Create Service User"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Create ozone user and group\nsudo groupadd ozone\nsudo useradd -g ozone -m -s /bin/bash ozone\n\n# Create data directories\nsudo mkdir -p /data/ozone/{metadata,datanode/id,datanode/data}\nsudo chown -R ozone:ozone /data/ozone\n\n# Create installation directory\nsudo mkdir -p /opt/ozone\nsudo chown ozone:ozone /opt/ozone\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-download-and-extract-ozone",children:"Step 3: Download and Extract Ozone"}),"\n",(0,s.jsxs)(n.p,{children:["Check ",(0,s.jsx)(n.a,{href:"https://github.com/apache/ozone/releases/latest",children:"GitHub releases"})," for the latest version."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Switch to ozone user\nsudo su - ozone\n\n# Download Ozone (latest: 2.1.0)\nwget https://downloads.apache.org/ozone/2.1.0/ozone-2.1.0.tar.gz\n\n# Extract on all nodes\ntar -xzf ozone-2.1.0.tar.gz -C /opt/\nln -s /opt/ozone /opt/ozone-2.1.0\ncd /opt/ozone\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-generate-and-configure",children:"Step 4: Generate and Configure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Generate configuration template\nbin/ozone genconf /opt/ozone/etc/hadoop/\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Edit ",(0,s.jsx)(n.code,{children:"/opt/ozone/etc/hadoop/ozone-site.xml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<configuration>\n  <property>\n    <name>ozone.metadata.dirs</name>\n    <value>/data/ozone/metadata</value>\n  </property>\n\n  <property>\n    <name>ozone.scm.names</name>\n    <value>scm-host.example.com</value>\n  </property>\n\n  <property>\n    <name>ozone.om.address</name>\n    <value>om-host.example.com</value>\n  </property>\n\n  <property>\n    <name>ozone.scm.datanode.id.dir</name>\n    <value>/data/ozone/datanode/id</value>\n  </property>\n\n  <property>\n    <name>hdds.datanode.dir</name>\n    <value>/data/ozone/datanode/data</value>\n  </property>\n\n  <property>\n    <name>ozone.replication</name>\n    <value>3</value>\n    \x3c!-- Use 1 for single node deployment --\x3e\n  </property>\n\n  \x3c!-- Optional: S3 Gateway Configuration --\x3e\n  <property>\n    <name>ozone.s3g.http-address</name>\n    <value>0.0.0.0:9878</value>\n  </property>\n</configuration>\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Configuration Resources:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ozone.apache.org/docs/edge/start/onprem.html#ozone-settings-summary",children:"Configuration Properties Reference"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ozone.apache.org/docs/edge/concept/ports.html",children:"Network Ports Reference"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ozone.apache.org/docs/edge/interface/s3.html",children:"S3 Gateway Setup Guide"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ozone.apache.org/docs/edge/security/secureozone.html",children:"Security Configuration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ozone.apache.org/docs/edge/feature/om-ha.html",children:"High Availability Setup"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Copy ",(0,s.jsx)(n.code,{children:"ozone-site.xml"})," to all nodes."]}),"\n",(0,s.jsx)(n.h3,{id:"step-5-initialize-services",children:"Step 5: Initialize Services"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# On SCM node (as ozone user)\nbin/ozone scm --init\n\n# On OM node (requires SCM to be running)\nbin/ozone om --init\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-6-start-services",children:"Step 6: Start Services"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Start SCM (on SCM node, as ozone user)\nbin/ozone --daemon start scm\n\n# Start OM (on OM node, as ozone user)\nbin/ozone --daemon start om\n\n# Start Datanodes (on all datanode nodes, as ozone user)\nbin/ozone --daemon start datanode\n\n# Optional: Start Recon (on Recon node, as ozone user)\nbin/ozone --daemon start recon\n\n# Optional: Start S3 Gateway (on S3G node, as ozone user)\nbin/ozone --daemon start s3g\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-7-verify-installation",children:"Step 7: Verify Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Check running processes\njps\n# Should list all ozone process\n\n# Test basic operations\nbin/ozone sh volume create /vol1\nbin/ozone sh bucket create /vol1/bucket1\necho "Hello Ozone" > /tmp/test.txt\nbin/ozone sh key put /vol1/bucket1/key1 /tmp/test.txt\nbin/ozone sh key list /vol1/bucket1\n'})}),"\n",(0,s.jsx)(n.h3,{id:"stop-services-when-needed",children:"Stop Services (when needed)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bin/ozone --daemon stop s3g\nbin/ozone --daemon stop datanode\nbin/ozone --daemon stop om\nbin/ozone --daemon stop scm\nbin/ozone --daemon stop recon\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"method-2-automated-installation-recommended",children:"Method 2: Automated Installation (Recommended)"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.a,{href:"https://github.com/apache/ozone-installer",children:"ozone-installer"})," is an Ansible-based tool that automates Ozone deployment. It handles Java installation, user creation, and all configuration steps automatically."]}),"\n",(0,s.jsx)(n.h3,{id:"installation-steps",children:"Installation Steps"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Clone and setup:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/apache/ozone-installer.git\ncd ozone-installer\npip install -r requirements.txt\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Run the installer:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Single node\npython3 ozone_installer.py -H hostname.example.com -v 2.1.0\n\n# Multi-node (HA with 3+ hosts)\npython3 ozone_installer.py -H "host{1..5}.example.com" -v 2.1.0\n\n# Using host file\npython3 ozone_installer.py -F hosts.txt -v 2.1.0\n\n# Specify Python interpreter (if needed)\npython3 ozone_installer.py -H hosts -v 2.1.0 --python-interpreter /usr/bin/python3.9\n\n# Cleanup and reinstall\npython3 ozone_installer.py --clean -H hosts -v 2.1.0\n'})}),"\n",(0,s.jsx)(n.h3,{id:"what-gets-installed",children:"What Gets Installed"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Automated setup includes:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Java 11 or 17 installation (if not present)"}),"\n",(0,s.jsxs)(n.li,{children:["Service user (",(0,s.jsx)(n.code,{children:"ozone"}),") creation"]}),"\n",(0,s.jsx)(n.li,{children:"Directory structure setup"}),"\n",(0,s.jsx)(n.li,{children:"Ozone binary installation and configuration"}),"\n",(0,s.jsx)(n.li,{children:"S3 Gateway setup"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Non-HA (1-2 nodes):"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"First host: OM + SCM + Recon (+ S3G if enabled)"}),"\n",(0,s.jsx)(n.li,{children:"All hosts: Datanodes"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"HA (3+ nodes):"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"First 3 hosts: OM + SCM (HA)"}),"\n",(0,s.jsx)(n.li,{children:"First host: Recon + S3G (if enabled)"}),"\n",(0,s.jsx)(n.li,{children:"All hosts: Datanodes"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Default paths:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Install: ",(0,s.jsx)(n.code,{children:"/opt/ozone"})]}),"\n",(0,s.jsxs)(n.li,{children:["Data: ",(0,s.jsx)(n.code,{children:"/data/ozone"})]}),"\n",(0,s.jsxs)(n.li,{children:["Service user: ",(0,s.jsx)(n.code,{children:"ozone:ozone"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["For more details, see the ",(0,s.jsx)(n.a,{href:"https://github.com/apache/ozone-installer",children:"ozone-installer repository"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://cwiki.apache.org/confluence/display/OZONE/Single+Node+Deployment",children:"Single Node Deployment Guide"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/apache/ozone-installer",children:"Ozone Installer on GitHub"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},62392:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>l});var t=o(30758);const s={},a=t.createContext(s);function i(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);