"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[71184],{62392:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>r});var t=a(30758);const s={},i=t.createContext(s);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},63108:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"user-guide/integrations/impala","title":"Impala","description":"Starting with version 4.2.0, Apache Impala provides full support for querying data stored in Apache Ozone. To utilize this functionality, ensure that your Ozone version is 1.4.0 or later.","source":"@site/versioned_docs/version-2.1.0/04-user-guide/03-integrations/04-impala.md","sourceDirName":"04-user-guide/03-integrations","slug":"/user-guide/integrations/impala","permalink":"/docs/user-guide/integrations/impala","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/master/versioned_docs/version-2.1.0/04-user-guide/03-integrations/04-impala.md","tags":[],"version":"2.1.0","sidebarPosition":4,"frontMatter":{"sidebar_label":"Impala"},"sidebar":"defaultSidebar","previous":{"title":"Iceberg","permalink":"/docs/user-guide/integrations/iceberg"},"next":{"title":"Oozie","permalink":"/docs/user-guide/integrations/oozie"}}');var s=a(86070),i=a(62392);const o={sidebar_label:"Impala"},r="Impala",l={},c=[{value:"Supported Access Protocols",id:"supported-access-protocols",level:2},{value:"Supported Replication Types",id:"supported-replication-types",level:2},{value:"Querying Ozone Data with Impala",id:"querying-ozone-data-with-impala",level:2},{value:"Managed Tables",id:"managed-tables",level:3},{value:"Specifying a Custom Ozone Path",id:"specifying-a-custom-ozone-path",level:4},{value:"External Tables",id:"external-tables",level:3},{value:"Using the S3A Protocol",id:"using-the-s3a-protocol",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"impala",children:"Impala"})}),"\n",(0,s.jsx)(n.p,{children:"Starting with version 4.2.0, Apache Impala provides full support for querying data stored in Apache Ozone. To utilize this functionality, ensure that your Ozone version is 1.4.0 or later."}),"\n",(0,s.jsx)(n.h2,{id:"supported-access-protocols",children:"Supported Access Protocols"}),"\n",(0,s.jsx)(n.p,{children:"Impala supports the following protocols for accessing Ozone data:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ofs"}),"\n",(0,s.jsx)(n.li,{children:"s3a"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Note: The o3fs protocol is ",(0,s.jsx)(n.strong,{children:"NOT"})," supported by Impala."]}),"\n",(0,s.jsx)(n.h2,{id:"supported-replication-types",children:"Supported Replication Types"}),"\n",(0,s.jsx)(n.p,{children:"Impala is compatible with Ozone buckets configured with either:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RATIS"})," (Replication)"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Erasure Coding"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"querying-ozone-data-with-impala",children:"Querying Ozone Data with Impala"}),"\n",(0,s.jsx)(n.p,{children:"Impala provides two approaches to interact with Ozone:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Managed Tables"}),"\n",(0,s.jsx)(n.li,{children:"External Tables"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"managed-tables",children:"Managed Tables"}),"\n",(0,s.jsx)(n.p,{children:"If the Hive Warehouse Directory is located in Ozone, you can execute Impala queries without any changes, treating the Ozone file system like HDFS. For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE d1;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE t1 (x INT, s STRING);\n"})}),"\n",(0,s.jsx)(n.p,{children:"The data will be stored under the Hive Warehouse Directory path in Ozone."}),"\n",(0,s.jsx)(n.h4,{id:"specifying-a-custom-ozone-path",children:"Specifying a Custom Ozone Path"}),"\n",(0,s.jsxs)(n.p,{children:["You can create managed databases, tables, or partitions at a specific Ozone path using the ",(0,s.jsx)(n.code,{children:"LOCATION"})," clause. Example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE d1 LOCATION 'ofs://ozone1/vol1/bucket1/d1.db';\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE t1 LOCATION 'ofs://ozone1/vol1/bucket1/table1';\n"})}),"\n",(0,s.jsx)(n.h3,{id:"external-tables",children:"External Tables"}),"\n",(0,s.jsx)(n.p,{children:"You can create an external table in Impala to query Ozone data. For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE EXTERNAL TABLE external_table (\n  id INT,\n  name STRING\n)\nLOCATION 'ofs://ozone1/vol1/bucket1/table1';\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"With external tables, the data is expected to be created and managed by another tool."}),"\n",(0,s.jsx)(n.li,{children:"Impala queries the data as-is."}),"\n",(0,s.jsx)(n.li,{children:"The metadata is stored under the external warehouse directory."}),"\n",(0,s.jsx)(n.li,{children:"Note: Dropping an external table in Impala does not delete the associated data."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"using-the-s3a-protocol",children:"Using the S3A Protocol"}),"\n",(0,s.jsx)(n.p,{children:"In addition to ofs, Impala can access Ozone via the S3 Gateway using the S3A file system. For more details, refer to"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.a,{href:"/docs/user-guide/client-interfaces/s3/s3-api",children:"S3 Protocol"})]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.a,{href:"https://hadoop.apache.org/docs/current/hadoop-aws/tools/hadoop-aws/index.html",children:"Hadoop S3A"})," documentation."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For additional information, consult the Apache Impala User Documentation\n",(0,s.jsx)(n.a,{href:"https://impala.apache.org/docs/build/html/topics/impala_ozone.html",children:"Using Impala with Apache Ozone Storage"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);