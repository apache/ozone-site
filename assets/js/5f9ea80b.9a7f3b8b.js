"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[9005],{55438:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"user-guide/client-interfaces/httpfs","title":"HttpFS Gateway","description":"Ozone HttpFS can be used to integrate Ozone with other tools via REST API.","source":"@site/docs/04-user-guide/01-client-interfaces/05-httpfs.md","sourceDirName":"04-user-guide/01-client-interfaces","slug":"/user-guide/client-interfaces/httpfs","permalink":"/docs/user-guide/client-interfaces/httpfs","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/master/docs/04-user-guide/01-client-interfaces/05-httpfs.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_label":"HttpFS Gateway"},"sidebar":"defaultSidebar","previous":{"title":"s3a","permalink":"/docs/user-guide/client-interfaces/s3a"},"next":{"title":"Java Client API","permalink":"/docs/user-guide/client-interfaces/java-client-api"}}');var r=n(86070),o=n(62392);const i={sidebar_label:"HttpFS Gateway"},l="HttpFS Gateway",d={},a=[{value:"Introduction",id:"introduction",level:2},{value:"Getting started",id:"getting-started",level:2},{value:"Create a volume",id:"create-a-volume",level:3},{value:"Create a bucket",id:"create-a-bucket",level:3},{value:"Upload a file",id:"upload-a-file",level:3},{value:"Read the file content",id:"read-the-file-content",level:3},{value:"Supported operations",id:"supported-operations",level:2},{value:"File and Directory Operations",id:"file-and-directory-operations",level:3},{value:"Other File System Operations",id:"other-file-system-operations",level:3},{value:"Proxy User Configuration",id:"proxy-user-configuration",level:2},{value:"Configuration Properties",id:"configuration-properties",level:3},{value:"Example Configuration",id:"example-configuration",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"Hadoop user and developer documentation about HttpFS",id:"hadoop-user-and-developer-documentation-about-httpfs",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"httpfs-gateway",children:"HttpFS Gateway"})}),"\n",(0,r.jsx)(t.p,{children:"Ozone HttpFS can be used to integrate Ozone with other tools via REST API."}),"\n",(0,r.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(t.p,{children:["HttpFS is a service that provides a REST HTTP gateway supporting File System operations (read and write).\nIt is interoperable with the ",(0,r.jsx)(t.strong,{children:"WebHDFS"})," REST HTTP API."]}),"\n",(0,r.jsx)(t.p,{children:"HttpFS can be used to access data on an Ozone cluster behind of a firewall.\nFor example, the HttpFS service acts as a gateway and is the only system that is allowed to cross the firewall into the cluster."}),"\n",(0,r.jsx)(t.p,{children:"HttpFS can be used to access data in Ozone using HTTP utilities (such as curl and wget) and HTTP libraries Perl from other languages than Java."}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.strong,{children:"WebHDFS"})," client FileSystem implementation can be used to access HttpFS using the Ozone filesystem command line tool (",(0,r.jsx)(t.code,{children:"ozone fs"}),") as well as from Java applications using the Hadoop FileSystem Java API."]}),"\n",(0,r.jsx)(t.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,r.jsxs)(t.p,{children:["To try it out, follow the ",(0,r.jsx)(t.a,{href:"/docs/quick-start/installation/docker",children:"instructions"})," to start the Ozone cluster with Docker Compose."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"docker compose up -d --scale datanode=3\n"})}),"\n",(0,r.jsxs)(t.p,{children:["You can/should find now the HttpFS gateway in Docker with the name like ",(0,r.jsx)(t.code,{children:"ozone_httpfs"}),",\nand it can be accessed through ",(0,r.jsx)(t.code,{children:"localhost:14000"}),".\nHttpFS HTTP web-service API calls are HTTP REST calls that map to an Ozone file system operation."]}),"\n",(0,r.jsx)(t.p,{children:"Here's some example usage:"}),"\n",(0,r.jsx)(t.h3,{id:"create-a-volume",children:"Create a volume"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'# creates a volume called `volume1`.\ncurl -i -X PUT "http://localhost:14000/webhdfs/v1/volume1?op=MKDIRS&user.name=hdfs"\n'})}),"\n",(0,r.jsx)(t.p,{children:"Example Output:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'HTTP/1.1 200 OK\nDate: Sat, 18 Oct 2025 07:51:21 GMT\nCache-Control: no-cache\nExpires: Sat, 18 Oct 2025 07:51:21 GMT\nPragma: no-cache\nContent-Type: application/json\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 1; mode=block\nSet-Cookie: hadoop.auth="u=hdfs&p=hdfs&t=simple-dt&e=1760809881100&s=OCdVOi8eyMguFySkmEJxm5EkRfj6NbAM9agi5Gue1Iw="; Path=/; HttpOnly\nContent-Length: 17\n\n{"boolean":true}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"create-a-bucket",children:"Create a bucket"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'# creates a bucket called `bucket1`.\ncurl -i -X PUT "http://localhost:14000/webhdfs/v1/volume1/bucket1?op=MKDIRS&user.name=hdfs"\n'})}),"\n",(0,r.jsx)(t.p,{children:"Example Output:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'HTTP/1.1 200 OK\nDate: Sat, 18 Oct 2025 07:52:06 GMT\nCache-Control: no-cache\nExpires: Sat, 18 Oct 2025 07:52:06 GMT\nPragma: no-cache\nContent-Type: application/json\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 1; mode=block\nSet-Cookie: hadoop.auth="u=hdfs&p=hdfs&t=simple-dt&e=1760809926682&s=yvOaeaRCVJZ+z+nZQ/rM/Y01pzEmS9Pe2mE9f0b+TWw="; Path=/; HttpOnly\nContent-Length: 17\n\n{"boolean":true}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"upload-a-file",children:"Upload a file"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'echo "hello" >> ./README.txt\ncurl -i -X PUT "http://localhost:14000/webhdfs/v1/volume1/bucket1/user/foo/README.txt?op=CREATE&data=true&user.name=hdfs" -T ./README.txt -H "Content-Type: application/octet-stream" \n'})}),"\n",(0,r.jsx)(t.p,{children:"Example Output:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'HTTP/1.1 100 Continue\n\nHTTP/1.1 201 Created\nDate: Sat, 18 Oct 2025 08:33:33 GMT\nCache-Control: no-cache\nExpires: Sat, 18 Oct 2025 08:33:33 GMT\nPragma: no-cache\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 1; mode=block\nSet-Cookie: hadoop.auth="u=hdfs&p=hdfs&t=simple-dt&e=1760812413286&s=09t7xKu/p/fjCJiQNL3bvW/Q7mTw28IbeNqDGlslZ6w="; Path=/; HttpOnly\nLocation: http://localhost:14000/webhdfs/v1/volume1/bucket1/user/foo/README.txt\nContent-Type: application/json\nContent-Length: 84\n\n{"Location":"http://localhost:14000/webhdfs/v1/volume1/bucket1/user/foo/README.txt"}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"read-the-file-content",children:"Read the file content"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"# returns the content of the key `/user/foo/README.txt`.\ncurl 'http://localhost:14000/webhdfs/v1/volume1/bucket1/user/foo/README.txt?op=OPEN&user.name=foo'\nhello\n"})}),"\n",(0,r.jsx)(t.h2,{id:"supported-operations",children:"Supported operations"}),"\n",(0,r.jsx)(t.p,{children:"Here are the tables of WebHDFS REST APIs and their state of support in Ozone."}),"\n",(0,r.jsx)(t.h3,{id:"file-and-directory-operations",children:"File and Directory Operations"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Operation"}),(0,r.jsx)(t.th,{children:"Support"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Create and Write to a File"}),(0,r.jsx)(t.td,{children:"supported"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Append to a File"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Concat File(s)"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Open and Read a File"}),(0,r.jsx)(t.td,{children:"supported"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Make a Directory"}),(0,r.jsx)(t.td,{children:"supported"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Create a Symbolic Link"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Rename a File/Directory"}),(0,r.jsx)(t.td,{children:"supported (with limitations)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Delete a File/Directory"}),(0,r.jsx)(t.td,{children:"supported"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Truncate a File"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Status of a File/Directory"}),(0,r.jsx)(t.td,{children:"supported"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"List a Directory"}),(0,r.jsx)(t.td,{children:"supported"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"List a File"}),(0,r.jsx)(t.td,{children:"supported"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Iteratively List a Directory"}),(0,r.jsx)(t.td,{children:"unsupported"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"other-file-system-operations",children:"Other File System Operations"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Operation"}),(0,r.jsx)(t.th,{children:"Support"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Get Content Summary of a Directory"}),(0,r.jsx)(t.td,{children:"supported"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Get Quota Usage of a Directory"}),(0,r.jsx)(t.td,{children:"supported"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Set Quota"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Set Quota By Storage Type"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Get File Checksum"}),(0,r.jsx)(t.td,{children:"unsupported (to be fixed)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Get Home Directory"}),(0,r.jsx)(t.td,{children:"unsupported (to be fixed)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Get Trash Root"}),(0,r.jsx)(t.td,{children:"unsupported"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Set Permission"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Set Owner"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Set Replication Factor"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Set Access or Modification Time"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Modify ACL Entries"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Remove ACL Entries"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Remove Default ACL"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Remove ACL"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Set ACL"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Get ACL Status"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Check access"}),(0,r.jsx)(t.td,{children:"not implemented in Ozone FileSystem API"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"proxy-user-configuration",children:"Proxy User Configuration"}),"\n",(0,r.jsx)(t.p,{children:"HttpFS supports proxy user (user impersonation) functionality, which allows a user to perform operations on behalf of another user. This is useful when HttpFS is used as a gateway and you want to allow certain users to impersonate other users."}),"\n",(0,r.jsxs)(t.p,{children:["To configure proxy users, you need to add the following properties to ",(0,r.jsx)(t.code,{children:"httpfs-site.xml"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"configuration-properties",children:"Configuration Properties"}),"\n",(0,r.jsx)(t.p,{children:"For each user that should be allowed to perform impersonation, you need to configure two properties:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"httpfs.proxyuser.#USER#.hosts"})}),": List of hosts from which the user is allowed to perform impersonation operations."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"httpfs.proxyuser.#USER#.groups"})}),": List of groups whose users can be impersonated by the specified user."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Replace ",(0,r.jsx)(t.code,{children:"#USER#"})," with the actual username of the user who should be allowed to perform impersonation."]}),"\n",(0,r.jsx)(t.h3,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",children:"<property>\n  <name>httpfs.proxyuser.knoxuser.hosts</name>\n  <value>*</value>\n  <description>\n    List of hosts the 'knoxuser' user is allowed to perform 'doAs'\n    operations.\n    \n    The value can be the '*' wildcard or a comma-separated list of hostnames.\n    \n    For multiple users, copy this property and replace the user name\n    in the property name.\n  </description>\n</property>\n\n<property>\n  <name>httpfs.proxyuser.knoxuser.groups</name>\n  <value>*</value>\n  <description>\n    List of groups the 'knoxuser' user is allowed to impersonate users\n    from to perform 'doAs' operations.\n    \n    The value can be the '*' wildcard or a comma-separated list of group names.\n    \n    For multiple users, copy this property and replace the user name\n    in the property name.\n  </description>\n</property>\n"})}),"\n",(0,r.jsxs)(t.p,{children:["In this example, the user ",(0,r.jsx)(t.code,{children:"knoxuser"})," is allowed to impersonate any user from any host. For production environments, it's recommended to restrict these values to specific hosts and groups instead of using the wildcard ",(0,r.jsx)(t.code,{children:"*"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(t.p,{children:"If you encounter an error like:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"User: user/host @REALM is not allowed to impersonate user01\n"})}),"\n",(0,r.jsx)(t.p,{children:"This indicates that the proxy user configuration is missing or incorrect. Ensure that:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["The ",(0,r.jsx)(t.code,{children:"httpfs.proxyuser.#USER#.hosts"})," property is set with appropriate host values"]}),"\n",(0,r.jsxs)(t.li,{children:["The ",(0,r.jsx)(t.code,{children:"httpfs.proxyuser.#USER#.groups"})," property is set with appropriate group values"]}),"\n",(0,r.jsx)(t.li,{children:"The HttpFS service has been restarted after configuration changes"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"hadoop-user-and-developer-documentation-about-httpfs",children:"Hadoop user and developer documentation about HttpFS"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://hadoop.apache.org/docs/stable/hadoop-hdfs-httpfs/ServerSetup.html",children:"HttpFS Server Setup"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://hadoop.apache.org/docs/stable/hadoop-hdfs-httpfs/ServerSetup.html",children:"Using HTTP Tools"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},62392:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var s=n(30758);const r={},o=s.createContext(r);function i(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);