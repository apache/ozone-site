"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[4257],{51542:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"administrator-guide/operations/observability/distributed-tracing","title":"Distributed tracing","description":"Distributed tracing can help to understand performance bottleneck with visualizing end-to-end performance.","source":"@site/docs/05-administrator-guide/03-operations/09-observability/06-distributed-tracing.md","sourceDirName":"05-administrator-guide/03-operations/09-observability","slug":"/administrator-guide/operations/observability/distributed-tracing","permalink":"/docs/administrator-guide/operations/observability/distributed-tracing","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/HDDS-9225-website-v2/docs/05-administrator-guide/03-operations/09-observability/06-distributed-tracing.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_label":"Distributed tracing"},"sidebar":"defaultSidebar","previous":{"title":"Grafana","permalink":"/docs/administrator-guide/operations/observability/grafana"},"next":{"title":"Leader Transfer","permalink":"/docs/administrator-guide/operations/leader-transfer/"}}');var i=r(86070),a=r(62392);const o={sidebar_label:"Distributed tracing"},s="Distributed tracing",d={},c=[];function l(e){const t={a:"a",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"distributed-tracing",children:"Distributed tracing"})}),"\n",(0,i.jsxs)(t.p,{children:["Distributed tracing can help to understand performance bottleneck with visualizing end-to-end performance.\nOzone makes use of ",(0,i.jsx)(t.a,{href:"https://opentelemetry.io/",children:"OpenTelemetry"})," API for tracing and uses OTLP with gRPC format for sending traces.\n",(0,i.jsx)(t.a,{href:"https://jaegertracing.io",children:"jaeger"})," tracing library as collector can collect traces from Ozone over default port 4317 (as default)."]}),"\n",(0,i.jsxs)(t.p,{children:["Tracing is turned off by default, but can be turned on with ",(0,i.jsx)(t.code,{children:"hdds.tracing.enabled"})," from ",(0,i.jsx)(t.code,{children:"ozone-site.xml"})]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-xml",children:"<property>\n   <name>hdds.tracing.enabled</name>\n   <value>true</value>\n</property>\n"})}),"\n",(0,i.jsx)(t.p,{children:"Below are the configuration steps for setting the collector endpoint and sampling strategy. Set these environment variables to be set for each Ozone component (OM, SCM, Datanode) and for the Ozone client to enable tracing."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-env",children:"OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317\nOTEL_TRACES_SAMPLER_ARG=0.01\n"})}),"\n",(0,i.jsx)(t.p,{children:"This configuration will record 1% of the requests to limit the performance overhead."})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},62392:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>s});var n=r(30758);const i={},a=n.createContext(i);function o(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);