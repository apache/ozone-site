"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[8729],{20852:(e,n,a)=>{a.d(n,{A:()=>s});const s=a.p+"assets/images/diskBalancer-53a3a83a7f67ee898aa3810f693e76d0.png"},41803:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"administrator-guide/operations/data-balancing/disk-balancer","title":"Disk Balancer","description":"Overview","source":"@site/docs/05-administrator-guide/03-operations/05-data-balancing/02-disk-balancer.md","sourceDirName":"05-administrator-guide/03-operations/05-data-balancing","slug":"/administrator-guide/operations/data-balancing/disk-balancer","permalink":"/docs/administrator-guide/operations/data-balancing/disk-balancer","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/HDDS-9225-website-v2/docs/05-administrator-guide/03-operations/05-data-balancing/02-disk-balancer.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_label":"Balancing Data within Datanode"},"sidebar":"defaultSidebar","previous":{"title":"Balancing Data Among Datanodes","permalink":"/docs/administrator-guide/operations/data-balancing/container-balancer"},"next":{"title":"Certificate Rotation","permalink":"/docs/administrator-guide/operations/certificate-rotation"}}');var d=a(86070),i=a(62392);const r={sidebar_label:"Balancing Data within Datanode"},t="Disk Balancer",o={},l=[{value:"Overview",id:"overview",level:2},{value:"Feature Flag",id:"feature-flag",level:2},{value:"Authentication and Authorization",id:"authentication-and-authorization",level:2},{value:"Authentication Configuration",id:"authentication-configuration",level:3},{value:"Authorization Configuration",id:"authorization-configuration",level:3},{value:"Default Behavior",id:"default-behavior",level:4},{value:"Enabling Authorization for Additional Users",id:"enabling-authorization-for-additional-users",level:4},{value:"Example 1: Single user",id:"example-1-single-user",level:4},{value:"Example 2: Multiple users",id:"example-2-multiple-users",level:4},{value:"Example 3: Using groups",id:"example-3-using-groups",level:4},{value:"Command Line Usage",id:"command-line-usage",level:2},{value:"Command Syntax",id:"command-syntax",level:3},{value:"Command Options",id:"command-options",level:3},{value:"Examples",id:"examples",level:3},{value:"DiskBalancer Configurations",id:"diskbalancer-configurations",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"disk-balancer",children:"Disk Balancer"})}),"\n",(0,d.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,d.jsx)(n.p,{children:"Apache Ozone works well to distribute all containers evenly across all multiple disks on each Datanode. This initial spread ensures that I/O load is balanced from the start. However, over the operational lifetime of a cluster disk imbalance can occur due to the following reasons:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Adding new disks"})," to expand Datanode storage space."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Replacing old broken disks"})," with new disks."]}),"\n",(0,d.jsxs)(n.li,{children:["Massive ",(0,d.jsx)(n.strong,{children:"block"})," or ",(0,d.jsx)(n.strong,{children:"replica deletions"}),"."]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["This uneven utilisation of disks can create performance bottlenecks, as ",(0,d.jsx)(n.strong,{children:"over-utilised"})," disks become ",(0,d.jsx)(n.strong,{children:"hotspots"})," limiting the overall throughput of the Datanode. As a result, this new feature,\n",(0,d.jsx)(n.strong,{children:"DiskBalancer"}),", is introduced to ensure even data distribution across disks within a Datanode."]}),"\n",(0,d.jsxs)(n.p,{children:["A disk is considered a candidate for balancing if its ",(0,d.jsx)(n.code,{children:"VolumeDataDensity"})," exceeds a configurable ",(0,d.jsx)(n.code,{children:"threshold"}),". DiskBalancer can be triggered manually by ",(0,d.jsx)(n.strong,{children:"CLI commands"}),"."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{alt:"Data spread across disks",src:a(20852).A+"",width:"1438",height:"832"})}),"\n",(0,d.jsx)(n.h2,{id:"feature-flag",children:"Feature Flag"}),"\n",(0,d.jsx)(n.p,{children:"The Disk Balancer feature is introduced with a feature flag. By default, this feature is disabled."}),"\n",(0,d.jsxs)(n.p,{children:["The feature can be ",(0,d.jsx)(n.strong,{children:"enabled"})," by setting the following property to ",(0,d.jsx)(n.code,{children:"true"})," in the ",(0,d.jsx)(n.code,{children:"ozone-site.xml"})," configuration file: ",(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.enabled = true"})]}),"\n",(0,d.jsx)(n.h2,{id:"authentication-and-authorization",children:"Authentication and Authorization"}),"\n",(0,d.jsx)(n.p,{children:"DiskBalancer commands communicate directly with Datanodes via RPC, requiring proper authentication and authorization configuration."}),"\n",(0,d.jsx)(n.h3,{id:"authentication-configuration",children:"Authentication Configuration"}),"\n",(0,d.jsxs)(n.p,{children:["In secure clusters with Kerberos enabled, the Datanode must have its Kerberos principal configured for RPC authentication in ",(0,d.jsx)(n.code,{children:"ozone-site.xml"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-xml",children:"<property>\n  <name>hdds.datanode.kerberos.principal</name>\n  <value>dn/_HOST@REALM.TLD</value>\n  <description>\n    The Datanode service principal. This is typically set to\n    dn/_HOST@REALM.TLD. Each Datanode will substitute _HOST with its\n    own fully qualified hostname at startup. The _HOST placeholder\n    allows using the same configuration setting on all Datanodes.\n  </description>\n</property>\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Note:"})," Without this configuration, DiskBalancer commands will fail with authentication errors in secure clusters. The client uses this principal to verify the Datanode's identity when establishing RPC connections."]}),"\n",(0,d.jsx)(n.h3,{id:"authorization-configuration",children:"Authorization Configuration"}),"\n",(0,d.jsxs)(n.p,{children:["Each Datanode performs authorization checks using ",(0,d.jsx)(n.code,{children:"OzoneAdmins"})," based on the ",(0,d.jsx)(n.code,{children:"ozone.administrators"})," configuration:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Admin operations"})," (start, stop, update): Require the user to be in ",(0,d.jsx)(n.code,{children:"ozone.administrators"})," or belong to a group in ",(0,d.jsx)(n.code,{children:"ozone.administrators.groups"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Read-only operations"})," (status, report): Do not require admin privileges - any authenticated user can query status and reports"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"default-behavior",children:"Default Behavior"}),"\n",(0,d.jsxs)(n.p,{children:["By default, if ",(0,d.jsx)(n.code,{children:"ozone.administrators"})," is not configured, only the user who launched the Datanode service can start, stop, or update DiskBalancer. This means that in a typical deployment where the Datanode runs as user ",(0,d.jsx)(n.code,{children:"dn"}),", only that user has admin privileges for DiskBalancer operations."]}),"\n",(0,d.jsx)(n.h4,{id:"enabling-authorization-for-additional-users",children:"Enabling Authorization for Additional Users"}),"\n",(0,d.jsxs)(n.p,{children:["To allow other users to perform DiskBalancer admin operations (start, stop, update), configure the ",(0,d.jsx)(n.code,{children:"ozone.administrators"})," property in ",(0,d.jsx)(n.code,{children:"ozone-site.xml"}),":"]}),"\n",(0,d.jsx)(n.h4,{id:"example-1-single-user",children:"Example 1: Single user"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-xml",children:"<property>\n  <name>ozone.administrators</name>\n  <value>scm</value>\n</property>\n"})}),"\n",(0,d.jsx)(n.h4,{id:"example-2-multiple-users",children:"Example 2: Multiple users"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-xml",children:"<property>\n  <name>ozone.administrators</name>\n  <value>scm,hdfs</value>\n</property>\n"})}),"\n",(0,d.jsx)(n.h4,{id:"example-3-using-groups",children:"Example 3: Using groups"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-xml",children:"<property>\n  <name>ozone.administrators.groups</name>\n  <value>ozone-admins,cluster-operators</value>\n</property>\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Note:"})," ",(0,d.jsx)(n.code,{children:"ozone-admins"})," and ",(0,d.jsx)(n.code,{children:"cluster-operators"})," are example group names. Replace them with actual group names from your environment. After updating the ",(0,d.jsx)(n.code,{children:"ozone.administrators"})," configuration, restart the Datanode service for the changes to take effect."]}),"\n",(0,d.jsx)(n.h2,{id:"command-line-usage",children:"Command Line Usage"}),"\n",(0,d.jsxs)(n.p,{children:["The DiskBalancer is managed through the ",(0,d.jsx)(n.code,{children:"ozone admin datanode diskbalancer"})," command."]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Note:"})," This command is hidden from the main help message (",(0,d.jsx)(n.code,{children:"ozone admin datanode --help"}),"). This is because the feature is currently considered experimental and is disabled by default. The command is, however, fully functional for those who wish to enable and use the feature."]}),"\n",(0,d.jsx)(n.h3,{id:"command-syntax",children:"Command Syntax"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Start DiskBalancer:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"ozone admin datanode diskbalancer start [<datanode-address> ...] [OPTIONS] [--in-service-datanodes]\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Stop DiskBalancer:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"ozone admin datanode diskbalancer stop [<datanode-address> ...] [--in-service-datanodes]\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Update Configuration:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"ozone admin datanode diskbalancer update [<datanode-address> ...] [OPTIONS] [--in-service-datanodes]\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Get Status:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"ozone admin datanode diskbalancer status [<datanode-address> ...] [--in-service-datanodes] [--json]\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Get Report:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"ozone admin datanode diskbalancer report [<datanode-address> ...] [--in-service-datanodes] [--json]\n"})}),"\n",(0,d.jsx)(n.h3,{id:"command-options",children:"Command Options"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Option"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<datanode-address>"})}),(0,d.jsxs)(n.td,{children:["One or more Datanode addresses as positional arguments. Addresses can be:",(0,d.jsx)("br",{}),"- Hostname (e.g., ",(0,d.jsx)(n.code,{children:"DN-1"}),") - uses default CLIENT_RPC port (19864)",(0,d.jsx)("br",{}),"- Hostname with port (e.g., ",(0,d.jsx)(n.code,{children:"DN-1:19864"}),")",(0,d.jsx)("br",{}),"- IP address (e.g., ",(0,d.jsx)(n.code,{children:"192.168.1.10"}),")",(0,d.jsx)("br",{}),"- IP address with port (e.g., ",(0,d.jsx)(n.code,{children:"192.168.1.10:19864"}),")",(0,d.jsx)("br",{}),"- Stdin (",(0,d.jsx)(n.code,{children:"-"}),") - reads Datanode addresses from standard input, one per line"]}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"DN-1"}),(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"DN-1:19864"}),(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"192.168.1.10"}),(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"-"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"--in-service-datanodes"})}),(0,d.jsx)(n.td,{children:"It queries SCM for all IN_SERVICE Datanodes and executes the command on all of them."}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"--in-service-datanodes"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"--json"})}),(0,d.jsx)(n.td,{children:"Format output as JSON."}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"--json"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-t/--threshold-percentage"})}),(0,d.jsxs)(n.td,{children:["Volume density threshold percentage (default: 10.0). Used with ",(0,d.jsx)(n.code,{children:"start"})," and ",(0,d.jsx)(n.code,{children:"update"})," commands."]}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"-t 5"}),(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"--threshold-percentage 5.0"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-b/--bandwidth-in-mb"})}),(0,d.jsxs)(n.td,{children:["Maximum disk bandwidth in MB/s (default: 10). Used with ",(0,d.jsx)(n.code,{children:"start"})," and ",(0,d.jsx)(n.code,{children:"update"})," commands."]}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"-b 20"}),(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"--bandwidth-in-mb 50"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-p/--parallel-thread"})}),(0,d.jsxs)(n.td,{children:["Number of parallel threads (default: 1). Used with ",(0,d.jsx)(n.code,{children:"start"})," and ",(0,d.jsx)(n.code,{children:"update"})," commands."]}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"-p 5"}),(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"--parallel-thread 10"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-s/--stop-after-disk-even"})}),(0,d.jsxs)(n.td,{children:["Stop automatically after disks are balanced (default: true). Used with ",(0,d.jsx)(n.code,{children:"start"})," and ",(0,d.jsx)(n.code,{children:"update"})," commands."]}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"-s false"}),(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"--stop-after-disk-even true"})]})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Start DiskBalancer:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'# Start DiskBalancer on multiple datanodes\nozone admin datanode diskbalancer start DN-1 DN-2 DN-3\n\n# Start DiskBalancer on all IN_SERVICE datanodes\nozone admin datanode diskbalancer start --in-service-datanodes\n\n# Start DiskBalancer with configuration parameters\nozone admin datanode diskbalancer start DN-1 -t 5 -b 20 -p 5\n# Or using the long form:\nozone admin datanode diskbalancer start DN-1 --threshold-percentage 5 -b 20 -p 5\n\n# Read datanode addresses from stdin\necho -e "DN-1\\nDN-2" | ozone admin datanode diskbalancer start -\n\n# Start DiskBalancer with json output\nozone admin datanode diskbalancer start DN-1 --json\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Stop DiskBalancer:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# Stop DiskBalancer on multiple datanodes\nozone admin datanode diskbalancer stop DN-1 DN-2 DN-3\n\n# Stop DiskBalancer on all IN_SERVICE datanodes\nozone admin datanode diskbalancer stop --in-service-datanodes\n\n# Stop DiskBalancer with json output\nozone admin datanode diskbalancer stop DN-1 --json\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Update Configuration:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# Update multiple parameters\nozone admin datanode diskbalancer update DN-1 -t 5 -b 50 -p 10\n\n# Update on all IN_SERVICE datanodes\nozone admin datanode diskbalancer update --in-service-datanodes -t 5\n# Or using the long form:\nozone admin datanode diskbalancer update --in-service-datanodes --threshold-percentage 5\n\n# Update with json output\nozone admin datanode diskbalancer update DN-1 -b 50 --json\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Get Status:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# Get status from multiple datanodes\nozone admin datanode diskbalancer status DN-1 DN-2 DN-3\n\n# Get status from all IN_SERVICE datanodes\nozone admin datanode diskbalancer status --in-service-datanodes\n\n# Get status as JSON\nozone admin datanode diskbalancer status --in-service-datanodes --json\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Get Report:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# Get report from multiple datanodes\nozone admin datanode diskbalancer report DN-1 DN-2 DN-3\n\n# Get report from all IN_SERVICE datanodes\nozone admin datanode diskbalancer report --in-service-datanodes\n\n# Get report as JSON\nozone admin datanode diskbalancer report --in-service-datanodes --json\n"})}),"\n",(0,d.jsx)(n.h2,{id:"diskbalancer-configurations",children:"DiskBalancer Configurations"}),"\n",(0,d.jsxs)(n.p,{children:["The DiskBalancer's behavior can be controlled using the following configuration properties in ",(0,d.jsx)(n.code,{children:"ozone-site.xml"}),"."]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Property"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Purpose"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.enabled"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"false"})}),(0,d.jsx)(n.td,{children:"If false, the DiskBalancer service on the Datanode is disabled. Configure it to true for diskBalancer to be enabled."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.volume.density.threshold.percent"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"10.0"})}),(0,d.jsx)(n.td,{children:"A percentage (0-100). A Datanode is considered balanced if for each volume, its utilization differs from the average Datanode utilization by no more than this threshold."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.max.disk.throughputInMBPerSec"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"10"})}),(0,d.jsx)(n.td,{children:"The maximum bandwidth (in MB/s) that the balancer can use for moving data, to avoid impacting client I/O."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.parallel.thread"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"5"})}),(0,d.jsx)(n.td,{children:"The number of worker threads to use for moving containers in parallel."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.service.interval"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"60s"})}),(0,d.jsx)(n.td,{children:"The time interval at which the Datanode DiskBalancer service checks for imbalance and updates its configuration."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.stop.after.disk.even"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"true"})}),(0,d.jsx)(n.td,{children:"If true, the DiskBalancer will automatically stop its balancing activity once disks are considered balanced (i.e., all volume densities are within the threshold)."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.volume.choosing.policy"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"org.apache.hadoop."}),(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"ozone.container."})," ",(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"diskbalancer.policy."})," ",(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"DefaultVolumeChoosingPolicy"})]}),(0,d.jsx)(n.td,{children:"The policy class for selecting source and destination volumes for balancing."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.container.choosing.policy"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"org.apache.hadoop."}),(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"ozone.container."})," ",(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"diskbalancer.policy."})," ",(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"DefaultContainerChoosingPolicy"})]}),(0,d.jsx)(n.td,{children:"The policy class for selecting which containers to move from a source volume to destination volume."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.service.timeout"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"300s"})}),(0,d.jsx)(n.td,{children:"Timeout for the Datanode DiskBalancer service operations."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hdds.datanode.disk.balancer.should.run.default"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"false"})}),(0,d.jsx)(n.td,{children:"If the balancer fails to read its persisted configuration, this value determines if the service should run by default."})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},62392:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>t});var s=a(30758);const d={},i=s.createContext(d);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);