"use strict";(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[32630],{1:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"developer-guide/test/acceptance-tests","title":"Acceptance Tests","description":"Acceptance tests validate the complete Ozone system from an end-user perspective. They deploy and test Ozone in a containerized environment that closely resembles real-world deployments.","source":"@site/versioned_docs/version-2.1.0/08-developer-guide/03-test/03-acceptance-tests.md","sourceDirName":"08-developer-guide/03-test","slug":"/developer-guide/test/acceptance-tests","permalink":"/docs/developer-guide/test/acceptance-tests","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ozone-site/tree/master/versioned_docs/version-2.1.0/08-developer-guide/03-test/03-acceptance-tests.md","tags":[],"version":"2.1.0","sidebarPosition":3,"frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"Integration Tests","permalink":"/docs/developer-guide/test/integration-tests"},"next":{"title":"Continuous Integration","permalink":"/docs/developer-guide/test/continuous-integration"}}');var r=t(86070),i=t(62392);const o={},c="Acceptance Tests",l={},a=[{value:"Scope and Purpose",id:"scope-and-purpose",level:2},{value:"Testing Framework",id:"testing-framework",level:2},{value:"Key Features",id:"key-features",level:3},{value:"Directory Structure",id:"directory-structure",level:2},{value:"Test Structure",id:"test-structure",level:2},{value:"Running Tests Locally using Docker Compose",id:"running-tests-locally-using-docker-compose",level:2},{value:"Specialized Test Environments",id:"specialized-test-environments",level:2},{value:"Standard Environment",id:"standard-environment",level:3},{value:"Secure Environment (Kerberos)",id:"secure-environment-kerberos",level:3},{value:"High Availability (HA) Environment",id:"high-availability-ha-environment",level:3},{value:"S3",id:"s3",level:3},{value:"Test Reports",id:"test-reports",level:2},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"acceptance-tests",children:"Acceptance Tests"})}),"\n",(0,r.jsx)(n.p,{children:"Acceptance tests validate the complete Ozone system from an end-user perspective. They deploy and test Ozone in a containerized environment that closely resembles real-world deployments."}),"\n",(0,r.jsx)(n.h2,{id:"scope-and-purpose",children:"Scope and Purpose"}),"\n",(0,r.jsx)(n.p,{children:"Acceptance tests serve as the final validation layer in Ozone's testing strategy:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Unit Tests"}),": Test individual classes in isolation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Integration"})," Tests: Test component interactions using in-memory clusters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Tests"}),": Test the entire system as deployed in containers"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Acceptance tests are ideal for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"End-to-end workflows"}),"\n",(0,r.jsx)(n.li,{children:"API compliance (especially S3)"}),"\n",(0,r.jsx)(n.li,{children:"Security configurations"}),"\n",(0,r.jsx)(n.li,{children:"System behavior under various conditions"}),"\n",(0,r.jsx)(n.li,{children:"External interfaces and integrations"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"testing-framework",children:"Testing Framework"}),"\n",(0,r.jsxs)(n.p,{children:["Ozone uses ",(0,r.jsx)(n.a,{href:"https://robotframework.org/",children:"Robot Framework"})," for acceptance testing. Robot Framework is a generic test automation framework that uses a keyword-driven approach to testing."]}),"\n",(0,r.jsxs)(n.p,{children:["You can run acceptance tests in any environment after ",(0,r.jsx)(n.a,{href:"https://github.com/robotframework/robotframework/blob/master/INSTALL.rst",children:"installing robot framework"})]}),"\n",(0,r.jsx)(n.h3,{id:"key-features",children:"Key Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Human-readable test syntax"}),"\n",(0,r.jsx)(n.li,{children:"Extensive test libraries"}),"\n",(0,r.jsx)(n.li,{children:"Test case organization by feature"}),"\n",(0,r.jsx)(n.li,{children:"Detailed test reports"}),"\n",(0,r.jsx)(n.li,{children:"Ability to create custom keywords"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,r.jsxs)(n.p,{children:["Acceptance tests are located in the ",(0,r.jsx)(n.code,{children:"hadoop-ozone/dist/src/main/smoketest/"})," directory."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"smoketest/\n\u251c\u2500\u2500 basic/               # Basic functionality tests\n\u251c\u2500\u2500 s3/                  # S3 gateway tests\n\u251c\u2500\u2500 security/            # Security and authentication tests\n\u251c\u2500\u2500 recon/               # Recon service tests\n\u251c\u2500\u2500 ozone-lib/           # Shared libraries and utilities  \n\u251c\u2500\u2500 commonlib.robot      # Common test keywords\n\u2514\u2500\u2500 compose/             # Docker Compose test environment\n    \u251c\u2500\u2500 ozone/           # Ozone-specific test configurations\n    \u251c\u2500\u2500 security/        # Secure test configurations\n    \u2514\u2500\u2500 ha/              # HA test configurations\n"})}),"\n",(0,r.jsx)(n.h2,{id:"test-structure",children:"Test Structure"}),"\n",(0,r.jsxs)(n.p,{children:["Robot Framework tests are written in ",(0,r.jsx)(n.code,{children:"test_name.robot"})," files with a structured format:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"*** Settings ***\nDocumentation       Test Ozone volume operations\nLibrary             OperatingSystems\nResource            ../ozone-lib/shell.robot\n\n*** Variables ***\n${volume}           vol1\n\n*** Test Cases ***\nCreate Volume\n    Execute             ozone sh volume create /${volume}\n    Execute             ozone sh volume list\n    Should contain      ${OUTPUT}       ${volume}\n\nDelete Volume\n    Execute             ozone sh volume delete /${volume}\n    Execute             ozone sh volume list\n    Should not contain  ${OUTPUT}       ${volume}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"running-tests-locally-using-docker-compose",children:"Running Tests Locally using Docker Compose"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Go to the compose directory\ncd hadoop-ozone/dist/src/main/compose/\n\n# Run all tests\n./test-all.sh\n\n# Run single test\ndocker-compose up -d\n# wait....\n./test-single.sh scm basic/basic.robot\n"})}),"\n",(0,r.jsx)(n.h2,{id:"specialized-test-environments",children:"Specialized Test Environments"}),"\n",(0,r.jsx)(n.p,{children:"Ozone provides several pre-configured test environments:"}),"\n",(0,r.jsx)(n.h3,{id:"standard-environment",children:"Standard Environment"}),"\n",(0,r.jsx)(n.p,{children:"Basic Ozone cluster with minimal services."}),"\n",(0,r.jsx)(n.h3,{id:"secure-environment-kerberos",children:"Secure Environment (Kerberos)"}),"\n",(0,r.jsx)(n.p,{children:"Ozone cluster with Kerberos security enabled."}),"\n",(0,r.jsx)(n.h3,{id:"high-availability-ha-environment",children:"High Availability (HA) Environment"}),"\n",(0,r.jsx)(n.p,{children:"Ozone cluster with multiple OMs and SCMs for HA testing."}),"\n",(0,r.jsx)(n.h3,{id:"s3",children:"S3"}),"\n",(0,r.jsx)(n.p,{children:"Running S3 specific tests requires the following setup:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create a bucket"}),"\n",(0,r.jsxs)(n.li,{children:["Configure your local ",(0,r.jsx)(n.code,{children:"aws cli"})]}),"\n",(0,r.jsx)(n.li,{children:"Set bucket/endpointurl during the robot test execution"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"robot -v bucket:ozonetest -v OZONE_TEST:false -v OZONE_S3_SET_CREDENTIALS:false -v ENDPOINT_URL:https://s3.us-east-2.amazonaws.com smoketest/s3\n"})}),"\n",(0,r.jsx)(n.h2,{id:"test-reports",children:"Test Reports"}),"\n",(0,r.jsx)(n.p,{children:"After running tests, Robot Framework generates detailed HTML reports:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"report.html"}),": Summary report of all test cases"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"log.html"}),": Detailed log of test execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"output.xml"}),": XML output for processing with other tools"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["These reports are typically found in the ",(0,r.jsx)(n.code,{children:"robot-results/"})," directory."]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Use existing keywords: Leverage existing keywords from ",(0,r.jsx)(n.code,{children:"commonlib.robot"})," and other libraries"]}),"\n",(0,r.jsx)(n.li,{children:"Create reusable keywords: Define new keywords for complex operations"}),"\n",(0,r.jsx)(n.li,{children:"Clear test descriptions: Each test case should have a clear purpose"}),"\n",(0,r.jsx)(n.li,{children:"Independent tests: Tests should not depend on each other"}),"\n",(0,r.jsx)(n.li,{children:"Proper teardown: Always clean up resources in teardown sections"}),"\n",(0,r.jsx)(n.li,{children:"Meaningful assertions: Verify the right conditions with proper assertions"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},62392:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var s=t(30758);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);